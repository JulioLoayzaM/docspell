<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="Eike Kettner">
<meta name="description" content="Docspell is a Document Management System (DMS), a system that asists in organizing your piles of documents, resulting from scanners, e-mails and other sources with miminal effort.">
<meta name="keywords" content="document management system dms organizer ocr open source free scan pdf word doc archive gpl machine learning nlp auto tagging"/>
<meta name="robots" content="index,follow"/>
<meta name="image" property="og:image" content="/img/poster.png">
<meta name="title" property="og:title" content="Docspell – Simple Document Organizer">
<meta name="og:image" content="/img/poster.png">
<meta name="og:title" content="Docspell – Simple Document Organizer">
<meta name="og:site_name" content="Configuration - Docspell">
<meta name="og:url" content="">
<meta name="og:type" content="website">
<meta name="og:description" content="Simple Document Organizer">
<meta name="twitter:title" content="Docspell">
<meta name="twitter:image" content="/img/poster.png">
<meta name="twitter:description" content="Simple Document Organizer">
<meta name="twitter:card" content="summary_large_image">

<link rel="shortcut icon" href="/favicon-mc.ico" type="image/x-icon">
<link rel="icon" href="/favicon-mc.ico" type="image/x-icon">

        <title>Configuration – Docspell Documentation</title>
        <link rel="stylesheet" href="/styles.css">
        <script type="text/javascript" src="https://docspell.org/elasticlunr.min.js"></script>
<script type="text/javascript" src="https://docspell.org/search_index.en.js"></script>
<script type="text/javascript" src="https://docspell.org/js/searchhelper.js"></script>
<script type="text/javascript" src="https://docspell.org/js/bundle.js"></script>

    </head>
    <body>
        <section class="hero is-info is-small">
            <div class="hero-head">
                <nav class="navbar">
    <div class="navbar-brand">
        <a class="navbar-item" href="/">
            <span class="icon">
                <img src="/icons/logo-only-36.svg">
            </span>
            <span>
                Docspell
            </span>
        </a>
    </div>
    <div class="navbar-start">
        <a target="_blank"
           href="https://github.com/eikek/docspell"
           class="navbar-item">
            <span class="icon">
                <img src="/icons/github-40.svg">
            </span>
            <span>
                Github
            </span>
        </a>
    </div>
</nav>

            </div>
            <div class="hero-body">
                <div class="columns is-vcentered">
                    <div class="column is-8">
                        <h1 class="title">
                            Configuration
                        </h1>
                        <h2 class="subtitle">
                            Docspell Documentation
                        </h2>
                    </div>
                    <div class="column">
                        <div id="search"></div>
                    </div>
                </div>
            </div>
        </section>
        <nav class="breadcrumb has-succeeds-separator" aria-label="breadcrumbs"
             style="position:sticky; top: 0; z-index:10;">
            <ul>
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;"></a>
                </li>
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;">Overview</a>
                </li>
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;configure&#x2F;">Configuration</a>
                </li>
            </ul>
        </nav>
        
        <section class="section pt-2">
            <div class="columns is-desktop">
                <div class="column is-3">
                    <div class="menu"
                         style="position:sticky; top:2rem; z-index:10;">
                        <ul class="menu-list">
                            
                            <li>
                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;configure&#x2F;#file-format">
                                    File Format
                                </a>
                                <ul>
                                    
                                </ul>
                            </li>
                            
                            <li>
                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;configure&#x2F;#important-config-options">
                                    Important Config Options
                                </a>
                                <ul>
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;configure&#x2F;#jdbc">
                                            JDBC
                                        </a>
                                    </li>
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;configure&#x2F;#admin-endpoint">
                                            Admin Endpoint
                                        </a>
                                    </li>
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;configure&#x2F;#full-text-search-solr">
                                            Full-Text Search: SOLR
                                        </a>
                                    </li>
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;configure&#x2F;#bind">
                                            Bind
                                        </a>
                                    </li>
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;configure&#x2F;#baseurl">
                                            Baseurl
                                        </a>
                                    </li>
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;configure&#x2F;#app-id">
                                            App-id
                                        </a>
                                    </li>
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;configure&#x2F;#registration-options">
                                            Registration Options
                                        </a>
                                    </li>
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;configure&#x2F;#authentication">
                                            Authentication
                                        </a>
                                    </li>
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;configure&#x2F;#openid-connect-oauth2">
                                            OpenID Connect &#x2F; OAuth2
                                        </a>
                                    </li>
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;configure&#x2F;#file-processing">
                                            File Processing
                                        </a>
                                    </li>
                                    
                                </ul>
                            </li>
                            
                            <li>
                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;configure&#x2F;#jvm-options">
                                    JVM Options
                                </a>
                                <ul>
                                    
                                </ul>
                            </li>
                            
                            <li>
                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;configure&#x2F;#logging">
                                    Logging
                                </a>
                                <ul>
                                    
                                </ul>
                            </li>
                            
                            <li>
                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;configure&#x2F;#default-config">
                                    Default Config
                                </a>
                                <ul>
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;configure&#x2F;#rest-server">
                                            Rest Server
                                        </a>
                                    </li>
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;configure&#x2F;#joex">
                                            Joex
                                        </a>
                                    </li>
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;configure&#x2F;#environment-variables">
                                            Environment Variables
                                        </a>
                                    </li>
                                    
                                </ul>
                            </li>
                            
                        </ul>
                    </div>
                </div>

                <div class="column is-9">
                    <div class="container">
                        <div class="content doc">
                            <p>Docspell's executables (restserver and joex) can take one argument – a
configuration file. If that is not given, the defaults are used,
overriden by environment variables. A config file overrides default
values, so only values that differ from the defaults are necessary.
The complete default options and their documentation is at the end of
this page.</p>
<p>Besides the config file, another way is to provide individual settings
via key-value pairs to the executable by the <code>-D</code> option. For example
to override only <code>base-url</code> you could add the argument
<code>-Ddocspell.server.base-url=…</code> to the command. Multiple options are
possible. For more than few values this is very tedious, obviously, so
the recommended way is to maintain a config file. If these options
<em>and</em> a file is provded, then any setting given via the <code>-D…</code> option
overrides the same setting from the config file.</p>
<p>At last, it is possible to configure docspell via environment
variables if there is no config file supplied (if a config file <em>is</em>
supplied, it is always preferred). Note that this approach is limited,
as arrays are not supported. A list of environment variables can be
found at the <a href="https://docspell.org/docs/configure/#environment-variables">end of this page</a>. The
environment variable name follows the corresponding config key - where
dots are replaced by underscores and dashes are replaced by two
underscores. For example, the config key <code>docspell.server.app-name</code>
can be defined as env variable <code>DOCSPELL_SERVER_APP__NAME</code>.</p>
<p>It is also possible to specify environment variables inside a config
file (to get a mix of both) - please see the <a href="https://github.com/lightbend/config#standard-behavior">documentation of the
config library</a>
for more on this.</p>
<h1 id="file-format">File Format<a class="zola-anchor" href="#file-format" aria-label="Anchor link for: file-format">🔗</a></h1>
<p>The format of the configuration files can be
<a href="https://github.com/lightbend/config/blob/master/HOCON.md#hocon-human-optimized-config-object-notation">HOCON</a>,
JSON or what this <a href="https://github.com/lightbend/config">config
library</a> understands. The default
values below are in HOCON format, which is recommended, since it
allows comments and has some <a href="https://github.com/lightbend/config#features-of-hocon">advanced
features</a>.
Please also see their documentation for more details.</p>
<p>A short description (please check the links for better understanding):
The config consists of key-value pairs and can be written in a
JSON-like format (called HOCON). Keys are organized in trees, and a
key defines a full path into the tree. There are two ways:</p>
<pre style="background-color:#282828;color:#fdf4c1aa;"><code><span>a.b.c.d=15
</span></code></pre>
<p>or</p>
<pre style="background-color:#282828;color:#fdf4c1aa;"><code><span>a {
</span><span>  b {
</span><span>    c {
</span><span>      d = 15
</span><span>    }
</span><span>  }
</span><span>}
</span></code></pre>
<p>Both are exactly the same and these forms are both used at the same
time. Usually the braces approach is used to group some more settings,
for better readability.</p>
<p>Strings that contain &quot;not-so-common&quot; characters should be enclosed in
quotes. It is possible to define values at the top of the file and
reuse them on different locations via the <code>${full.path.to.key}</code>
syntax. When using these variables, they <em>must not</em> be enclosed in
quotes.</p>
<h1 id="important-config-options">Important Config Options<a class="zola-anchor" href="#important-config-options" aria-label="Anchor link for: important-config-options">🔗</a></h1>
<p>The configuration of both components uses separate namespaces. The
configuration for the REST server is below <code>docspell.server</code>, while
the one for joex is below <code>docspell.joex</code>.</p>
<p>You can therefore use two separate config files or one single file
containing both namespaces.</p>
<h2 id="jdbc">JDBC<a class="zola-anchor" href="#jdbc" aria-label="Anchor link for: jdbc">🔗</a></h2>
<p>This configures the connection to the database. This has to be
specified for the rest server and joex. By default, a H2 database in
the current <code>/tmp</code> directory is configured.</p>
<p>The config looks like this (both components):</p>
<pre data-lang="bash" style="background-color:#282828;color:#fdf4c1aa;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#fdf4c1;">docspell.joex.jdbc {
</span><span style="color:#fdf4c1;">  url = ...
</span><span style="color:#fdf4c1;">  user = ...
</span><span style="color:#fdf4c1;">  password = ...
</span><span style="color:#fdf4c1;">}
</span><span>
</span><span style="color:#fdf4c1;">docspell.server.backend.jdbc {
</span><span style="color:#fdf4c1;">  url = ...
</span><span style="color:#fdf4c1;">  user = ...
</span><span style="color:#fdf4c1;">  password = ...
</span><span style="color:#fdf4c1;">}
</span></code></pre>
<p>The <code>url</code> is the connection to the database. It must start with
<code>jdbc</code>, followed by name of the database. The rest is specific to the
database used: it is either a path to a file for H2 or a host/database
url for MariaDB and PostgreSQL.</p>
<p>When using H2, the user and password can be chosen freely on first
start, but must stay the same on subsequent starts. Usually, the user
is <code>sa</code> and the password is left empty. Additionally, the url must
include these options:</p>
<pre style="background-color:#282828;color:#fdf4c1aa;"><code><span>;MODE=PostgreSQL;DATABASE_TO_LOWER=TRUE;AUTO_SERVER=TRUE
</span></code></pre>
<h3 id="examples">Examples<a class="zola-anchor" href="#examples" aria-label="Anchor link for: examples">🔗</a></h3>
<p>PostgreSQL:</p>
<pre style="background-color:#282828;color:#fdf4c1aa;"><code><span>url = &quot;jdbc:postgresql://localhost:5432/docspelldb&quot;
</span></code></pre>
<p>MariaDB:</p>
<pre style="background-color:#282828;color:#fdf4c1aa;"><code><span>url = &quot;jdbc:mariadb://localhost:3306/docspelldb&quot;
</span></code></pre>
<p>H2</p>
<pre style="background-color:#282828;color:#fdf4c1aa;"><code><span>url = &quot;jdbc:h2:///path/to/a/file.db;MODE=PostgreSQL;DATABASE_TO_LOWER=TRUE;AUTO_SERVER=TRUE&quot;
</span></code></pre>
<h2 id="admin-endpoint">Admin Endpoint<a class="zola-anchor" href="#admin-endpoint" aria-label="Anchor link for: admin-endpoint">🔗</a></h2>
<p>The admin endpoint defines some <a href="https://docspell.org/docs/api/intro/#admin">routes</a>
for adminstration tasks. This is disabled by default and can be
enabled by providing a secret:</p>
<pre data-lang="bash" style="background-color:#282828;color:#fdf4c1aa;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#fdf4c1;">...
</span><span>  </span><span style="color:#fdf4c1;">admin-endpoint {
</span><span style="color:#fdf4c1;">    secret = </span><span style="color:#b8bb26;">&quot;123&quot;
</span><span style="color:#fdf4c1;">  }
</span></code></pre>
<p>This secret must be provided to all requests to a <code>/api/v1/admin/</code>
endpoint.</p>
<h2 id="full-text-search-solr">Full-Text Search: SOLR<a class="zola-anchor" href="#full-text-search-solr" aria-label="Anchor link for: full-text-search-solr">🔗</a></h2>
<p><a href="https://solr.apache.org">Apache SOLR</a> is used to provide the
full-text search. Both docspell components must provide the same
connection setup. This is defined in the <code>full-text-search.solr</code>
subsection:</p>
<pre data-lang="bash" style="background-color:#282828;color:#fdf4c1aa;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#fdf4c1;">...
</span><span>  </span><span style="color:#fdf4c1;">full-text-search {
</span><span style="color:#fdf4c1;">    enabled = true
</span><span style="color:#fdf4c1;">    ...
</span><span style="color:#fdf4c1;">    solr = {
</span><span style="color:#fdf4c1;">      url = </span><span style="color:#b8bb26;">&quot;http://localhost:8983/solr/docspell&quot;
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">  }
</span></code></pre>
<p>The default configuration at the end of this page contains more
information about each setting.</p>
<p>The <code>solr.url</code> is the mandatory setting that you need to change to
point to your SOLR instance. Then you need to set the <code>enabled</code> flag
to <code>true</code>.</p>
<p>When installing docspell manually, just install solr and create a core
as described in the <a href="https://solr.apache.org/guide/8_4/installing-solr.html">solr
documentation</a>.
That will provide you with the connection url (the last part is the
core name). If Docspell detects an empty core it will run a schema
setup on start automatically.</p>
<p>The <code>full-text-search.solr</code> options are the same for joex and the
restserver.</p>
<p>There is an <a href="https://docspell.org/docs/api/intro/#admin">admin route</a> that allows to
re-create the entire index (for all collectives). This is possible via
a call:</p>
<pre data-lang="bash" style="background-color:#282828;color:#fdf4c1aa;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#fdf4c1;">$ curl -XPOST -H </span><span style="color:#b8bb26;">&quot;Docspell-Admin-Secret: test123&quot;</span><span style="color:#fdf4c1;"> http://localhost:7880/api/v1/admin/fts/reIndexAll
</span></code></pre>
<p>Here the <code>test123</code> is the key defined with <code>admin-endpoint.secret</code>. If
it is empty (the default), this call is disabled (all admin routes).
Otherwise, the POST request will submit a system task that is executed
by a joex instance eventually.</p>
<p>Using this endpoint, the entire index (including the schema) will be
re-created. This is sometimes necessary, for example if you upgrade
SOLR or delete the core to provide a new one (see
<a href="https://solr.apache.org/guide/8_4/reindexing.html">here</a> for
details). Another way is to restart docspell (while clearing the
index). If docspell detects an empty index at startup, it will submit
a task to build the index automatically.</p>
<p>Note that a collective can also re-index their data using a similiar
endpoint; but this is only deleting their data and doesn't do a full
re-index.</p>
<p>The solr index doesn't contain any new information, it can be
regenerated any time using the above REST call. Thus it doesn't need
to be backed up.</p>
<h2 id="bind">Bind<a class="zola-anchor" href="#bind" aria-label="Anchor link for: bind">🔗</a></h2>
<p>The host and port the http server binds to. This applies to both
components. The joex component also exposes a small REST api to
inspect its state and notify the scheduler.</p>
<pre data-lang="bash" style="background-color:#282828;color:#fdf4c1aa;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#fdf4c1;">docspell.server.bind {
</span><span style="color:#fdf4c1;">  address = localhost
</span><span style="color:#fdf4c1;">  port = 7880
</span><span style="color:#fdf4c1;">}
</span><span style="color:#fdf4c1;">docspell.joex.bind {
</span><span style="color:#fdf4c1;">  address = localhost
</span><span style="color:#fdf4c1;">  port = 7878
</span><span style="color:#fdf4c1;">}
</span></code></pre>
<p>By default, it binds to <code>localhost</code> and some predefined port. This
must be changed, if components are on different machines.</p>
<h2 id="baseurl">Baseurl<a class="zola-anchor" href="#baseurl" aria-label="Anchor link for: baseurl">🔗</a></h2>
<p>The base url is an important setting that defines the http URL where
the corresponding component can be reached. It applies to both
components. For a joex component, the url must be resolvable from a
REST server component. The REST server also uses this url to create
absolute urls and to configure the authenication cookie.</p>
<p>By default it is build using the information from the <code>bind</code> setting,
which is <code>http://localhost:7880</code>.</p>
<p>If the default is not changed, docspell will use the request to
determine the base-url. It first inspects the <code>X-Forwarded-For</code> header
that is often used with reverse proxies. If that is not present, the
<code>Host</code> header of the request is used. However, if the <code>base-url</code>
setting is changed, then only this setting is used.</p>
<pre style="background-color:#282828;color:#fdf4c1aa;"><code><span>docspell.server.base-url = ...
</span><span>docspell.joex.base-url = ...
</span></code></pre>
<p>If you are unsure, leave it at its default.</p>
<h3 id="examples-1">Examples<a class="zola-anchor" href="#examples-1" aria-label="Anchor link for: examples-1">🔗</a></h3>
<pre style="background-color:#282828;color:#fdf4c1aa;"><code><span>docspell.server.baseurl = &quot;https://docspell.example.com&quot;
</span><span>docspell.joex.baseurl = &quot;http://192.168.101.10&quot;
</span></code></pre>
<h2 id="app-id">App-id<a class="zola-anchor" href="#app-id" aria-label="Anchor link for: app-id">🔗</a></h2>
<p>The <code>app-id</code> is the identifier of the corresponding instance. It <em>must
be unique</em> for all instances. By default the REST server uses <code>rest1</code>
and joex <code>joex1</code>. It is recommended to overwrite this setting to have
an explicit and stable identifier should multiple instances are
intended.</p>
<pre data-lang="bash" style="background-color:#282828;color:#fdf4c1aa;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#fdf4c1;">docspell.server.app-id = </span><span style="color:#b8bb26;">&quot;rest1&quot;
</span><span style="color:#fdf4c1;">docspell.joex.app-id = </span><span style="color:#b8bb26;">&quot;joex1&quot;
</span></code></pre>
<h2 id="registration-options">Registration Options<a class="zola-anchor" href="#registration-options" aria-label="Anchor link for: registration-options">🔗</a></h2>
<p>This defines if and how new users can create accounts. There are 3
options:</p>
<ul>
<li><em>closed</em> no new user can sign up</li>
<li><em>open</em> new users can sign up</li>
<li><em>invite</em> new users can sign up but require an invitation key</li>
</ul>
<p>This applies only to the REST sevrer component.</p>
<pre data-lang="bash" style="background-color:#282828;color:#fdf4c1aa;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#fdf4c1;">docspell.server.backend.signup {
</span><span style="color:#fdf4c1;">  mode = </span><span style="color:#b8bb26;">&quot;open&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># If mode == &#39;invite&#39;, a password must be provided to generate
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># invitation keys. It must not be empty.
</span><span style="color:#fdf4c1;">  new-invite-password = </span><span style="color:#b8bb26;">&quot;&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># If mode == &#39;invite&#39;, this is the period an invitation token is
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># considered valid.
</span><span style="color:#fdf4c1;">  invite-time = </span><span style="color:#b8bb26;">&quot;3 days&quot;
</span><span style="color:#fdf4c1;">}
</span></code></pre>
<p>The mode <code>invite</code> is intended to open the application only to some
users. The admin can create these invitation keys and distribute them
to the desired people. For this, the <code>new-invite-password</code> must be
given. The idea is that only the person who installs docspell knows
this. If it is not set, then invitation won't work. New invitation
keys can be generated from within the web application or via REST
calls (using <code>curl</code>, for example).</p>
<pre data-lang="bash" style="background-color:#282828;color:#fdf4c1aa;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#fdf4c1;">curl -X POST -d </span><span style="color:#b8bb26;">&#39;{&quot;password&quot;:&quot;blabla&quot;}&#39; &quot;http://localhost:7880/api/v1/open/signup/newinvite&quot;
</span></code></pre>
<h2 id="authentication">Authentication<a class="zola-anchor" href="#authentication" aria-label="Anchor link for: authentication">🔗</a></h2>
<p>Authentication works in two ways:</p>
<ul>
<li>with an account-name / password pair</li>
<li>with an authentication token</li>
</ul>
<p>The initial authentication must occur with an accountname/password
pair. This will generate an authentication token which is valid for a
some time. Subsequent calls to secured routes can use this token. The
token can be given as a normal http header or via a cookie header.</p>
<p>These settings apply only to the REST server.</p>
<pre data-lang="bash" style="background-color:#282828;color:#fdf4c1aa;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#fdf4c1;">docspell.server.auth {
</span><span style="color:#fdf4c1;">  server-secret = </span><span style="color:#b8bb26;">&quot;hex:caffee&quot; </span><span style="font-style:italic;color:#928374;"># or &quot;b64:Y2FmZmVlCg==&quot;
</span><span style="color:#fdf4c1;">  session-valid = </span><span style="color:#b8bb26;">&quot;5 minutes&quot;
</span><span style="color:#fdf4c1;">}
</span></code></pre>
<p>The <code>server-secret</code> is used to sign the token. If multiple REST
servers are deployed, all must share the same server secret. Otherwise
tokens from one instance are not valid on another instance. The secret
can be given as Base64 encoded string or in hex form. Use the prefix
<code>hex:</code> and <code>b64:</code>, respectively. If no prefix is given, the UTF8 bytes
of the string are used.</p>
<p>The <code>session-valid</code> determines how long a token is valid. This can be
just some minutes, the web application obtains new ones
periodically. So a rather short time is recommended.</p>
<h2 id="openid-connect-oauth2">OpenID Connect / OAuth2<a class="zola-anchor" href="#openid-connect-oauth2" aria-label="Anchor link for: openid-connect-oauth2">🔗</a></h2>
<p>You can integrate Docspell into your SSO solution via <a href="https://openid.net/connect/">OpenID
Connect</a> (OIDC). This requires to set up
an OpenID Provider (OP) somewhere and to configure Docspell
accordingly to act as the relying party.</p>
<p>You can define multiple OPs to use. For some examples, please see the
default configuration file <a href="https://docspell.org/docs/configure/#rest-server">below</a>.</p>
<p>The configuration of a provider highly depends on how it is setup.
Here is an example for a setup using
<a href="https://www.keycloak.org">keycloak</a>:</p>
<pre data-lang="conf" style="background-color:#282828;color:#fdf4c1aa;" class="language-conf "><code class="language-conf" data-lang="conf"><span style="color:#fdf4c1;">provider </span><span style="color:#fe8019;">=</span><span> {
</span><span>  </span><span style="color:#fdf4c1;">provider-id </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;keycloak&quot;</span><span style="color:#fe8019;">,
</span><span>  </span><span style="color:#fdf4c1;">client-id </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;docspell&quot;</span><span style="color:#fe8019;">,
</span><span>  </span><span style="color:#fdf4c1;">client-secret </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;example-secret-439e-bf06-911e4cdd56a6&quot;</span><span style="color:#fe8019;">,
</span><span>  </span><span style="color:#fdf4c1;">scope </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;profile&quot;</span><span style="color:#fe8019;">, </span><span style="font-style:italic;color:#928374;"># scope is required for OIDC
</span><span>  </span><span style="color:#fdf4c1;">authorize-url </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;http://localhost:8080/auth/realms/home/protocol/openid-connect/auth&quot;</span><span style="color:#fe8019;">,
</span><span>  </span><span style="color:#fdf4c1;">token-url </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;http://localhost:8080/auth/realms/home/protocol/openid-connect/token&quot;</span><span style="color:#fe8019;">,
</span><span>  </span><span style="font-style:italic;color:#928374;">#User URL is not used when signature key is set.
</span><span>  </span><span style="font-style:italic;color:#928374;">#user-url = &quot;http://localhost:8080/auth/realms/home/protocol/openid-connect/userinfo&quot;,
</span><span>  </span><span style="color:#fdf4c1;">sign-key </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;b64:MII…ZYL09vAwLn8EAcSkCAwEAAQ==&quot;</span><span style="color:#fe8019;">,
</span><span>  </span><span style="color:#fdf4c1;">sig-algo </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;RS512&quot;
</span><span>}
</span></code></pre>
<p>The <code>provider-id</code> is some identifier that is used in the URL to
distinguish between possibly multiple providers. The <code>client-id</code> and
<code>client-secret</code> define the two parameters required for a &quot;confidential
client&quot;. The different URLs are best explained at the <a href="https://www.keycloak.org/docs/latest/server_admin/#_oidc-endpoints">keycloak
docs</a>.
They are available for all OPs in some way. The <code>user-url</code> is not
required, if the access token is already containing the necessary
data. If not, then docspell performs another request to the
<code>user-url</code>, which must be the user-info endpoint, to obtain the
required user data.</p>
<p>If the data is taken from the token directly and not via a request to
the user-info endpoint, then the token must be validated using the
given <code>sign-key</code> and <code>sig-algo</code>. These two values are then required to
specify! However, if the user-info endpoint should be used, then leave
the <code>sign-key</code> empty and specify the correct url in <code>user-url</code>. When
specifying the <code>sign-key</code> use a prefix of <code>b64:</code> if it is Base64
encoded or <code>hex:</code> if it is hex encoded. Otherwise the unicode bytes
are used, which is most probably not wanted for this setting.</p>
<p>Once the user is authenticated, docspell tries to setup an account and
does some checks. For this it must get to the username and collective
name somehow. How it does this, can be specified by the <code>user-key</code> and
<code>collective-key</code> settings:</p>
<pre data-lang="conf" style="background-color:#282828;color:#fdf4c1aa;" class="language-conf "><code class="language-conf" data-lang="conf"><span style="font-style:italic;color:#928374;"># The collective of the user is given in the access token as
</span><span style="font-style:italic;color:#928374;"># property `docspell_collective`.
</span><span style="color:#fdf4c1;">collective-key </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;lookup:docspell_collective&quot;</span><span style="color:#fe8019;">,
</span><span style="font-style:italic;color:#928374;"># The username to use for the docspell account
</span><span style="color:#fdf4c1;">user-key </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;preferred_username&quot;
</span></code></pre>
<p>The <code>user-key</code> is some string that is used to search the JSON response
from the OP for an object with that key. The search happens
recursively, so the field can be in a nested object. The found value
is used as the user name. Keycloak transmits the <code>preferred_username</code>
when asking for the <code>profile</code> scope. This can be used as the user
name.</p>
<p>The collective name can be obtained by different ways. For example,
you can instruct your OP (like keycloak) to provide a collective name
in the token and/or user-info responses. If you do this, then use the
<code>lookup:</code> prefix as in the example above. This instructs docspell to
search for a value the same way as the <code>user-key</code>. You can also set a
fixed collective, using <code>fixed:</code> prefix; in this case all users are in
the same collective! A third option is to prefix it with <code>account:</code> -
then the value that is looked up is interpreted as the full account
name, like <code>collective/user</code> and the <code>user-key</code> setting is ignored. If
you want to put each user in its own collective, you can just use the
same value as in <code>user-key</code>, only prefixed with <code>lookup:</code>. In the
example it would be <code>lookup:preferred_username</code>.</p>
<p>If you find that these methods do not suffice for your case, please
open an issue.</p>
<h2 id="file-processing">File Processing<a class="zola-anchor" href="#file-processing" aria-label="Anchor link for: file-processing">🔗</a></h2>
<p>Files are being processed by the joex component. So all the respective
configuration is in this config only.</p>
<p>File processing involves several stages, detailed information can be
found <a href="https://docspell.org/docs/joex/file-processing/#text-analysis">here</a> and in the
corresponding sections in <a href="https://docspell.org/docs/configure/#joex">joex default config</a>.</p>
<p>Configuration allows to define the external tools and set some
limitations to control memory usage. The sections are:</p>
<ul>
<li><code>docspell.joex.extraction</code></li>
<li><code>docspell.joex.text-analysis</code></li>
<li><code>docspell.joex.convert</code></li>
</ul>
<p>Options to external commands can use variables that are replaced by
values at runtime. Variables are enclosed in double braces <code>{{…}}</code>.
Please see the default configuration for what variables exist per
command.</p>
<h3 id="classification">Classification<a class="zola-anchor" href="#classification" aria-label="Anchor link for: classification">🔗</a></h3>
<p>In <code>text-analysis.classification</code> you can define how many documents at
most should be used for learning. The default settings should work
well for most cases. However, it always depends on the amount of data
and the machine that runs joex. For example, by default the documents
to learn from are limited to 600 (<code>classification.item-count</code>) and
every text is cut after 5000 characters (<code>text-analysis.max-length</code>).
This is fine if <em>most</em> of your documents are small and only a few are
near 5000 characters). But if <em>all</em> your documents are very large, you
probably need to either assign more heap memory or go down with the
limits.</p>
<p>Classification can be disabled, too, for when it's not needed.</p>
<h3 id="nlp">NLP<a class="zola-anchor" href="#nlp" aria-label="Anchor link for: nlp">🔗</a></h3>
<p>This setting defines which NLP mode to use. It defaults to <code>full</code>,
which requires more memory for certain languages (with the advantage
of better results). Other values are <code>basic</code>, <code>regexonly</code> and
<code>disabled</code>. The modes <code>full</code> and <code>basic</code> use pre-defined lanugage
models for procesing documents of languaes German, English and French.
These require some amount of memory (see below).</p>
<p>The mode <code>basic</code> is like the &quot;light&quot; variant to <code>full</code>. It doesn't use
all NLP features, which makes memory consumption much lower, but comes
with the compromise of less accurate results.</p>
<p>The mode <code>regexonly</code> doesn't use pre-defined lanuage models, even if
available. It checks your address book against a document to find
metadata. That means, it is language independent. Also, when using
<code>full</code> or <code>basic</code> with lanugages where no pre-defined models exist, it
will degrade to <code>regexonly</code> for these.</p>
<p>The mode <code>disabled</code> skips NLP processing completely. This has least
impact in memory consumption, obviously, but then only the classifier
is used to find metadata (unless it is disabled, too).</p>
<p>You might want to try different modes and see what combination suits
best your usage pattern and machine running joex. If a powerful
machine is used, simply leave the defaults. When running on an
raspberry pi, for example, you might need to adjust things.</p>
<h3 id="memory-usage">Memory Usage<a class="zola-anchor" href="#memory-usage" aria-label="Anchor link for: memory-usage">🔗</a></h3>
<p>The memory requirements for the joex component depends on the document
language and the enabled features for text-analysis. The <code>nlp.mode</code>
setting has significant impact, especially when your documents are in
German. Here are some rough numbers on jvm heap usage (the same file
was used for all tries):</p>
<table class="table is-hoverable is-striped">
<thead>
  <tr><th>nlp.mode</th><th>English</th><th>German</th><th>French</th></tr>
</thead>
<tfoot>
</tfoot>
<tbody>
  <tr><td>full</td><td>420M</td><td>950M</td><td>490M</td></tr>
  <tr><td>basic</td><td>170M</td><td>380M</td><td>390M</td></tr>
</tbody>
</table>
<p>Note that these are only rough numbers and they show the maximum used
heap memory while processing a file.</p>
<p>When using <code>mode=full</code>, a heap setting of at least <code>-Xmx1400M</code> is
recommended. For <code>mode=basic</code> a heap setting of at least <code>-Xmx500M</code> is
recommended.</p>
<p>Other languages can't use these two modes, and so don't require this
amount of memory (but don't have as good results). Then you can go
with less heap. For these languages, the nlp mode is the same as
<code>regexonly</code>.</p>
<p>Training the classifier is also memory intensive, which solely depends
on the size and number of documents that are being trained. However,
training the classifier is done periodically and can happen maybe
every two weeks. When classifying new documents, memory requirements
are lower, since the model already exists.</p>
<p>More details about these modes can be found
<a href="https://docspell.org/docs/joex/file-processing/#text-analysis">here</a>.</p>
<p>The restserver component is very lightweight, here you can use
defaults.</p>
<h1 id="jvm-options">JVM Options<a class="zola-anchor" href="#jvm-options" aria-label="Anchor link for: jvm-options">🔗</a></h1>
<p>The start scripts support some options to configure the JVM. One often
used setting is the maximum heap size of the JVM. By default, java
determines it based on properties of the current machine. You can
specify it by given java startup options to the command:</p>
<pre style="background-color:#282828;color:#fdf4c1aa;"><code><span>$ ./docspell-restserver*/bin/docspell-restserver -J-Xmx1G -- /path/to/server-config.conf
</span></code></pre>
<p>This would limit the maximum heap to 1GB. The double slash separates
internal options and the arguments to the program. Another frequently
used option is to change the default temp directory. Usually it is
<code>/tmp</code>, but it may be desired to have a dedicated temp directory,
which can be configured:</p>
<pre style="background-color:#282828;color:#fdf4c1aa;"><code><span>$ ./docspell-restserver*/bin/docspell-restserver -J-Xmx1G -Djava.io.tmpdir=/path/to/othertemp -- /path/to/server-config.conf
</span></code></pre>
<p>The command:</p>
<pre style="background-color:#282828;color:#fdf4c1aa;"><code><span>$ ./docspell-restserver*/bin/docspell-restserver -h
</span></code></pre>
<p>gives an overview of supported options.</p>
<p>It is recommended to run joex with the G1GC enabled. If you use java8,
you need to add an option to use G1GC (<code>-XX:+UseG1GC</code>), for java11
this is not necessary (but doesn't hurt either). This could look like
this:</p>
<pre style="background-color:#282828;color:#fdf4c1aa;"><code><span>./docspell-joex-&lt;pre data-shortcode&gt;0.29.0&lt;/pre&gt;/bin/docspell-joex -J-Xmx1596M -J-XX:+UseG1GC -- /path/to/joex.conf
</span></code></pre>
<p>Using these options you can define how much memory the JVM process is
able to use. This might be necessary to adopt depending on the usage
scenario and configured text analysis features.</p>
<p>Please have a look at the corresponding <a href="https://docspell.org/docs/configure/#memory-usage">section</a>.</p>
<h1 id="logging">Logging<a class="zola-anchor" href="#logging" aria-label="Anchor link for: logging">🔗</a></h1>
<p>By default, docspell logs to stdout. This works well, when managed by
systemd or other inits. Logging is done by
<a href="https://logback.qos.ch/">logback</a>. Please refer to its documentation
for how to configure logging.</p>
<p>If you created your logback config file, it can be added as argument
to the executable using this syntax:</p>
<pre data-lang="bash" style="background-color:#282828;color:#fdf4c1aa;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#fdf4c1;">/path/to/docspell -Dlogback.configurationFile=/path/to/your/logging-config-file
</span></code></pre>
<p>To get started, the default config looks like this:</p>
<pre data-lang="xml" style="background-color:#282828;color:#fdf4c1aa;" class="language-xml "><code class="language-xml" data-lang="xml"><span style="color:#83a598;">&lt;</span><span style="font-weight:bold;color:#8ec07c;">configuration</span><span style="color:#83a598;">&gt;
</span><span>  </span><span style="color:#83a598;">&lt;</span><span style="font-weight:bold;color:#8ec07c;">appender </span><span style="color:#8ec07c;">name=</span><span style="color:#b8bb26;">&quot;STDOUT&quot; </span><span style="color:#8ec07c;">class=</span><span style="color:#b8bb26;">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span><span style="color:#83a598;">&gt;
</span><span>    </span><span style="color:#83a598;">&lt;</span><span style="font-weight:bold;color:#8ec07c;">withJansi</span><span style="color:#83a598;">&gt;</span><span>true</span><span style="color:#83a598;">&lt;/</span><span style="font-weight:bold;color:#8ec07c;">withJansi</span><span style="color:#83a598;">&gt;
</span><span>
</span><span>    </span><span style="color:#83a598;">&lt;</span><span style="font-weight:bold;color:#8ec07c;">encoder</span><span style="color:#83a598;">&gt;
</span><span>      </span><span style="color:#83a598;">&lt;</span><span style="font-weight:bold;color:#8ec07c;">pattern</span><span style="color:#83a598;">&gt;</span><span>[%thread] %highlight(%-5level) %cyan(%logger{15}) - %msg %n</span><span style="color:#83a598;">&lt;/</span><span style="font-weight:bold;color:#8ec07c;">pattern</span><span style="color:#83a598;">&gt;
</span><span>    </span><span style="color:#83a598;">&lt;/</span><span style="font-weight:bold;color:#8ec07c;">encoder</span><span style="color:#83a598;">&gt;
</span><span>  </span><span style="color:#83a598;">&lt;/</span><span style="font-weight:bold;color:#8ec07c;">appender</span><span style="color:#83a598;">&gt;
</span><span>
</span><span>  </span><span style="color:#83a598;">&lt;</span><span style="font-weight:bold;color:#8ec07c;">logger </span><span style="color:#8ec07c;">name=</span><span style="color:#b8bb26;">&quot;docspell&quot; </span><span style="color:#8ec07c;">level=</span><span style="color:#b8bb26;">&quot;debug&quot; </span><span style="color:#83a598;">/&gt;
</span><span>  </span><span style="color:#83a598;">&lt;</span><span style="font-weight:bold;color:#8ec07c;">root </span><span style="color:#8ec07c;">level=</span><span style="color:#b8bb26;">&quot;INFO&quot;</span><span style="color:#83a598;">&gt;
</span><span>    </span><span style="color:#83a598;">&lt;</span><span style="font-weight:bold;color:#8ec07c;">appender-ref </span><span style="color:#8ec07c;">ref=</span><span style="color:#b8bb26;">&quot;STDOUT&quot; </span><span style="color:#83a598;">/&gt;
</span><span>  </span><span style="color:#83a598;">&lt;/</span><span style="font-weight:bold;color:#8ec07c;">root</span><span style="color:#83a598;">&gt;
</span><span style="color:#83a598;">&lt;/</span><span style="font-weight:bold;color:#8ec07c;">configuration</span><span style="color:#83a598;">&gt;
</span></code></pre>
<p>The <code>&lt;root level=&quot;INFO&quot;&gt;</code> means, that only log statements with level
&quot;INFO&quot; will be printed. But the <code>&lt;logger name=&quot;docspell&quot; level=&quot;debug&quot;&gt;</code> above says, that for loggers with name &quot;docspell&quot;
statements with level &quot;DEBUG&quot; will be printed, too.</p>
<h1 id="default-config">Default Config<a class="zola-anchor" href="#default-config" aria-label="Anchor link for: default-config">🔗</a></h1>
<h2 id="rest-server">Rest Server<a class="zola-anchor" href="#rest-server" aria-label="Anchor link for: rest-server">🔗</a></h2>
<pre data-lang="bash" style="background-color:#282828;color:#fdf4c1aa;" class="language-bash "><code class="language-bash" data-lang="bash"><span>
</span><span style="color:#fdf4c1;">docspell.server {
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># This is shown in the top right corner of the web application
</span><span style="color:#fdf4c1;">  app-name = </span><span style="color:#b8bb26;">&quot;Docspell&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># This is the id of this node. If you run more than one server, you
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># have to make sure to provide unique ids per node.
</span><span style="color:#fdf4c1;">  app-id = </span><span style="color:#b8bb26;">&quot;rest1&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># This is the base URL this application is deployed to. This is used
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># to create absolute URLs and to configure the cookie.
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># If default is not changed, the HOST line of the login request is
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># used instead or the value of the `X-Forwarded-For` header. If set
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># to some other value, the request is not inspected.
</span><span style="color:#fdf4c1;">  base-url = </span><span style="color:#b8bb26;">&quot;http://localhost:7880&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># This url is the base url for reaching this server internally.
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># While you might set `base-url` to some external address (like
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># mydocs.myserver.com), the `internal-url` must be set such that
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># other nodes can reach this server.
</span><span style="color:#fdf4c1;">  internal-url = </span><span style="color:#b8bb26;">&quot;http://localhost:7880&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># Where the server binds to.
</span><span style="color:#fdf4c1;">  bind {
</span><span style="color:#fdf4c1;">    address = </span><span style="color:#b8bb26;">&quot;localhost&quot;
</span><span style="color:#fdf4c1;">    port = 7880
</span><span style="color:#fdf4c1;">  }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># This is a hard limit to restrict the size of a batch that is
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># returned when searching for items. The user can set this limit
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># within the client config, but it is restricted by the server to
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># the number defined here. An admin might choose a lower number
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># depending on the available resources.
</span><span style="color:#fdf4c1;">  max-item-page-size = 200
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># The number of characters to return for each item notes when
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># searching. Item notes may be very long, when returning them with
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># all the results from a search, they add quite some data to return.
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># In order to keep this low, a limit can be defined here.
</span><span style="color:#fdf4c1;">  max-note-length = 180
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># This defines whether the classification form in the collective
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># settings is displayed or not. If all joex instances have document
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># classification disabled, it makes sense to hide its settings from
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># users.
</span><span style="color:#fdf4c1;">  show-classification-settings = true
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># Authentication.
</span><span style="color:#fdf4c1;">  auth {
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># The secret for this server that is used to sign the authenicator
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># tokens. If multiple servers are running, all must share the same
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># secret. You can use base64 or hex strings (prefix with b64: and
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># hex:, respectively). If empty, a random secret is generated.
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Example: b64:YRx77QujCGkHSvll0TVEmtTaw3Z5eXr+nWMsEJowgKg=
</span><span style="color:#fdf4c1;">    server-secret = </span><span style="color:#b8bb26;">&quot;&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># How long an authentication token is valid. The web application
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># will get a new one periodically.
</span><span style="color:#fdf4c1;">    session-valid = </span><span style="color:#b8bb26;">&quot;5 minutes&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    remember-me {
</span><span style="color:#fdf4c1;">      enabled = true
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># How long the remember me cookie/token is valid.
</span><span style="color:#fdf4c1;">      valid = </span><span style="color:#b8bb26;">&quot;30 days&quot;
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">  }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># Configures OpenID Connect (OIDC) or OAuth2 authentication. Only
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># the &quot;Authorization Code Flow&quot; is supported.
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># Multiple authentication providers can be defined. Each is
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># configured in the array below. The `provider` block gives all
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># details necessary to authenticate against an external OIDC or
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># OAuth provider. This requires at least two URLs for OIDC and three
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># for OAuth2. When using OIDC, the `user-url` is only required if
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># the account data is to be retrieved from the user-info endpoint
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># and not from the JWT token. For the request to the `user-url`, the
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># access token is then used to authenticate at the provider. Thus,
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># it doesn&#39;t need to be validated here and therefore no `sign-key`
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># setting is needed. However, if you want to extract the account
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># information from the access token, it must be validated here and
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># therefore the correct signature key and algorithm must be
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># provided. If the `sign-key` is left empty, the `user-url` is used
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># and must be specified. If the `sign-key` is _not_ empty, the
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># response from the authentication provider is validated using this
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># key.
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># After successful authentication, docspell needs to create the
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># account. For this a username and collective name is required. The
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># account name is defined by the `user-key` and `collective-key`
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># setting. The `user-key` is used to search the JSON structure, that
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># is obtained from the JWT token or the user-info endpoint, for the
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># login name to use. It traverses the JSON structure recursively,
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># until it finds an object with that key. The first value is used.
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># The `collective-key` can be used in multiple ways and both can
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># work together to retrieve the full account id:
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># - If it starts with `fixed:`, like &quot;fixed:collective&quot;, the name
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;">#   after the `fixed:` prefix is used as collective as is. So all
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;">#   users are in the same collective.
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># - If it starts with `lookup:`, like &quot;lookup:collective_name&quot;, the
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;">#   value after the prefix is used to search the JSON response for
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;">#   an object with this key, just like it works with the `user-key`.
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># - If it starts with `account:`, like &quot;account:demo&quot;, it works the
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;">#   same as `lookup:` only that the value is interpreted as the full
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;">#   account name of form `collective/login`. The `user-key` value is
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;">#   ignored in this case.
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># If these values cannot be obtained from the response, docspell
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># fails the authentication. It is then assumed that the successfully
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># authenticated user at the OP has not enough permissions to access
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># docspell.
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># Below are examples for OpenID Connect (keycloak) and OAuth2
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># (github).
</span><span style="color:#fdf4c1;">  openid =
</span><span style="color:#fdf4c1;">    [ { enabled = false,
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># The name to render on the login link/button.
</span><span style="color:#fdf4c1;">        display = </span><span style="color:#b8bb26;">&quot;Keycloak&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># This illustrates to use a custom keycloak setup as the
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># authentication provider. For details, please refer to the
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># keycloak documentation. The settings here assume a certain
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># configuration at keycloak.
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># Keycloak can be configured to return the collective name for
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># each user in the access token. It may also be configured to
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># return it in the user info response. If it is already in the
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># access token, an additional request can be omitted. Set the
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># `sign-key` to an empty string then. Otherwise provide the
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># algo and key from your realm settings. In this example, the
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># realm is called &quot;home&quot;.
</span><span style="color:#fdf4c1;">        provider = {
</span><span style="color:#fdf4c1;">          provider-id = </span><span style="color:#b8bb26;">&quot;keycloak&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          client-id = </span><span style="color:#b8bb26;">&quot;docspell&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          client-secret = </span><span style="color:#b8bb26;">&quot;example-secret-439e-bf06-911e4cdd56a6&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          scope = </span><span style="color:#b8bb26;">&quot;profile&quot;</span><span style="color:#fdf4c1;">, </span><span style="font-style:italic;color:#928374;"># scope is required for OIDC
</span><span style="color:#fdf4c1;">          authorize-url = </span><span style="color:#b8bb26;">&quot;http://localhost:8080/auth/realms/home/protocol/openid-connect/auth&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          token-url = </span><span style="color:#b8bb26;">&quot;http://localhost:8080/auth/realms/home/protocol/openid-connect/token&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          </span><span style="font-style:italic;color:#928374;">#User URL is not used when signature key is set.
</span><span style="color:#fdf4c1;">          </span><span style="font-style:italic;color:#928374;">#user-url = &quot;http://localhost:8080/auth/realms/home/protocol/openid-connect/userinfo&quot;,
</span><span style="color:#fdf4c1;">          sign-key = </span><span style="color:#b8bb26;">&quot;b64:anVzdC1hLXRlc3Q=&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          sig-algo = </span><span style="color:#b8bb26;">&quot;RS512&quot;
</span><span style="color:#fdf4c1;">        },
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># The collective of the user is given in the access token as
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># property `docspell_collective`.
</span><span style="color:#fdf4c1;">        collective-key = </span><span style="color:#b8bb26;">&quot;lookup:docspell_collective&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># The username to use for the docspell account
</span><span style="color:#fdf4c1;">        user-key = </span><span style="color:#b8bb26;">&quot;preferred_username&quot;
</span><span style="color:#fdf4c1;">      },
</span><span style="color:#fdf4c1;">      { enabled = false,
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># The name to render on the login link/button.
</span><span style="color:#fdf4c1;">        display = </span><span style="color:#b8bb26;">&quot;Github&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># Provider settings for using github as an authentication
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># provider. Note that this is only an example to illustrate
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># how it works. Usually you wouldn&#39;t want to let every user on
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># github in ;-).
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># Github doesn&#39;t have full OpenIdConnect, but supports the
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># OAuth2 code flow (which is very similar). It mainly means,
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># that there is no standardized token to validate and get
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># information from. So the user-url must be used in this case.
</span><span style="color:#fdf4c1;">        provider = {
</span><span style="color:#fdf4c1;">          provider-id = </span><span style="color:#b8bb26;">&quot;github&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          client-id = </span><span style="color:#b8bb26;">&quot;&lt;your github client id&gt;&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          client-secret = </span><span style="color:#b8bb26;">&quot;&lt;your github client secret&gt;&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          scope = </span><span style="color:#b8bb26;">&quot;&quot;</span><span style="color:#fdf4c1;">, </span><span style="font-style:italic;color:#928374;"># scope is not needed for github
</span><span style="color:#fdf4c1;">          authorize-url = </span><span style="color:#b8bb26;">&quot;https://github.com/login/oauth/authorize&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          token-url = </span><span style="color:#b8bb26;">&quot;https://github.com/login/oauth/access_token&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          user-url = </span><span style="color:#b8bb26;">&quot;https://api.github.com/user&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          sign-key = </span><span style="color:#b8bb26;">&quot;&quot; </span><span style="font-style:italic;color:#928374;"># this must be set empty
</span><span style="color:#fdf4c1;">          sig-algo = </span><span style="color:#b8bb26;">&quot;RS256&quot; </span><span style="font-style:italic;color:#928374;">#unused but must be set to something
</span><span style="color:#fdf4c1;">        },
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># If the authentication provider doesn&#39;t provide the
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># collective name, simply use a fixed one. This means all
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># users from this provider are in the same collective!
</span><span style="color:#fdf4c1;">        collective-key = </span><span style="color:#b8bb26;">&quot;fixed:demo&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># Github provides the login name via the `login` property as
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># response from the user-url. This value is used to construct
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># the account in docspell.
</span><span style="color:#fdf4c1;">        user-key = </span><span style="color:#b8bb26;">&quot;login&quot;
</span><span style="color:#fdf4c1;">      }
</span><span style="color:#fdf4c1;">    ]
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># This endpoint allows to upload files to any collective. The
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># intention is that local software integrates with docspell more
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># easily. Therefore the endpoint is not protected by the usual
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># means.
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># For security reasons, this endpoint is disabled by default. If
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># enabled, you can choose from some ways to protect it. It may be a
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># good idea to further protect this endpoint using a firewall, such
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># that outside traffic is not routed.
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># NOTE: If all protection methods are disabled, the endpoint is not
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># protected at all!
</span><span style="color:#fdf4c1;">  integration-endpoint {
</span><span style="color:#fdf4c1;">    enabled = false
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># The priority to use when submitting files through this endpoint.
</span><span style="color:#fdf4c1;">    priority = </span><span style="color:#b8bb26;">&quot;low&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># The name used for the item &quot;source&quot; property when uploaded
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># through this endpoint.
</span><span style="color:#fdf4c1;">    source-name = </span><span style="color:#b8bb26;">&quot;integration&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># IPv4 addresses to allow access. An empty list, if enabled,
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># prohibits all requests. IP addresses may be specified as simple
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># globs: a part marked as `*&#39; matches any octet, like in
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># `192.168.*.*`. The `127.0.0.1&#39; (the default) matches the
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># loopback address.
</span><span style="color:#fdf4c1;">    allowed-ips {
</span><span style="color:#fdf4c1;">      enabled = false
</span><span style="color:#fdf4c1;">      ips = </span><span style="color:#fa5c4b;">[ </span><span style="color:#b8bb26;">&quot;127.0.0.1&quot; </span><span style="color:#fa5c4b;">]
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Requests are expected to use http basic auth when uploading
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># files.
</span><span style="color:#fdf4c1;">    http-basic {
</span><span style="color:#fdf4c1;">      enabled = false
</span><span style="color:#fdf4c1;">      realm = </span><span style="color:#b8bb26;">&quot;Docspell Integration&quot;
</span><span style="color:#fdf4c1;">      user = </span><span style="color:#b8bb26;">&quot;docspell-int&quot;
</span><span style="color:#fdf4c1;">      password = </span><span style="color:#b8bb26;">&quot;docspell-int&quot;
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Requests are expected to supply some specific header when
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># uploading files.
</span><span style="color:#fdf4c1;">    http-header {
</span><span style="color:#fdf4c1;">      enabled = false
</span><span style="color:#fdf4c1;">      header-name = </span><span style="color:#b8bb26;">&quot;Docspell-Integration&quot;
</span><span style="color:#fdf4c1;">      header-value = </span><span style="color:#b8bb26;">&quot;some-secret&quot;
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">  }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># This is a special endpoint that allows some basic administration.
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># It is intended to be used by admins only, that is users who
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># installed the app and have access to the system. Normal users
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># should not have access and therefore a secret must be provided in
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># order to access it.
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># This is used for some endpoints, for example:
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># - re-create complete fulltext index:
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;">#   curl -XPOST -H&#39;Docspell-Admin-Secret: xyz&#39; http://localhost:7880/api/v1/admin/fts/reIndexAll
</span><span style="color:#fdf4c1;">  admin-endpoint {
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># The secret. If empty, the endpoint is disabled.
</span><span style="color:#fdf4c1;">    secret = </span><span style="color:#b8bb26;">&quot;&quot;
</span><span style="color:#fdf4c1;">  }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># Configuration of the full-text search engine.
</span><span style="color:#fdf4c1;">  full-text-search {
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># The full-text search feature can be disabled. It requires an
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># additional index server which needs additional memory and disk
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># space. It can be enabled later any time.
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Currently the SOLR search platform is supported.
</span><span style="color:#fdf4c1;">    enabled = false
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Configuration for the SOLR backend.
</span><span style="color:#fdf4c1;">    solr = {
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># The URL to solr
</span><span style="color:#fdf4c1;">      url = </span><span style="color:#b8bb26;">&quot;http://localhost:8983/solr/docspell&quot;
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># Used to tell solr when to commit the data
</span><span style="color:#fdf4c1;">      commit-within = 1000
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># If true, logs request and response bodies
</span><span style="color:#fdf4c1;">      log-verbose = false
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># The defType parameter to lucene that defines the parser to
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># use. You might want to try &quot;edismax&quot; or look here:
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># https://solr.apache.org/guide/8_4/query-syntax-and-parsing.html#query-syntax-and-parsing
</span><span style="color:#fdf4c1;">      def-type = </span><span style="color:#b8bb26;">&quot;lucene&quot;
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># The default combiner for tokens. One of {AND, OR}.
</span><span style="color:#fdf4c1;">      q-op = </span><span style="color:#b8bb26;">&quot;OR&quot;
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">  }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># Configuration for the backend.
</span><span style="color:#fdf4c1;">  backend {
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Enable or disable debugging for e-mail related functionality. This
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># applies to both sending and receiving mails. For security reasons
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># logging is not very extensive on authentication failures. Setting
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># this to true, results in a lot of data printed to stdout.
</span><span style="color:#fdf4c1;">    mail-debug = false
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># The database connection.
</span><span style="color:#fdf4c1;">    jdbc {
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># The JDBC url to the database. By default a H2 file-based
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># database is configured. You can provide a postgresql or
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># mariadb connection here. When using H2 use the PostgreSQL
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># compatibility mode and AUTO_SERVER feature.
</span><span style="color:#fdf4c1;">      url = </span><span style="color:#b8bb26;">&quot;jdbc:h2://&quot;</span><span style="color:#fdf4c1;">${java.io.tmpdir}</span><span style="color:#b8bb26;">&quot;/docspell-demo.db;MODE=PostgreSQL;DATABASE_TO_LOWER=TRUE;AUTO_SERVER=TRUE&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># The database user.
</span><span style="color:#fdf4c1;">      user = </span><span style="color:#b8bb26;">&quot;sa&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># The database password.
</span><span style="color:#fdf4c1;">      password = </span><span style="color:#b8bb26;">&quot;&quot;
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Configuration for registering new users.
</span><span style="color:#fdf4c1;">    signup {
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># The mode defines if new users can signup or not. It can have
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># three values:
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># - open: every new user can sign up
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># - invite: new users can sign up only if they provide a correct
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;">#   invitation key. Invitation keys can be generated by the
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;">#   server.
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># - closed: signing up is disabled.
</span><span style="color:#fdf4c1;">      mode = </span><span style="color:#b8bb26;">&quot;open&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># If mode == &#39;invite&#39;, a password must be provided to generate
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># invitation keys. It must not be empty.
</span><span style="color:#fdf4c1;">      new-invite-password = </span><span style="color:#b8bb26;">&quot;&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># If mode == &#39;invite&#39;, this is the period an invitation token is
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># considered valid.
</span><span style="color:#fdf4c1;">      invite-time = </span><span style="color:#b8bb26;">&quot;3 days&quot;
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    files {
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># Defines the chunk size (in bytes) used to store the files.
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># This will affect the memory footprint when uploading and
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># downloading files. At most this amount is loaded into RAM for
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># down- and uploading.
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># It also defines the chunk size used for the blobs inside the
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># database.
</span><span style="color:#fdf4c1;">      chunk-size = 524288
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># The file content types that are considered valid. Docspell
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># will only pass these files to processing. The processing code
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># itself has also checks for which files are supported and which
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># not. This affects the uploading part and can be used to
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># restrict file types that should be handed over to processing.
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># By default all files are allowed.
</span><span style="color:#fdf4c1;">      valid-mime-types = </span><span style="color:#fa5c4b;">[ ]
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">  }
</span><span style="color:#fdf4c1;">}
</span></code></pre>
<h2 id="joex">Joex<a class="zola-anchor" href="#joex" aria-label="Anchor link for: joex">🔗</a></h2>
<pre data-lang="bash" style="background-color:#282828;color:#fdf4c1aa;" class="language-bash "><code class="language-bash" data-lang="bash"><span>
</span><span style="color:#fdf4c1;">docspell.joex {
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># This is the id of this node. If you run more than one server, you
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># have to make sure to provide unique ids per node.
</span><span style="color:#fdf4c1;">  app-id = </span><span style="color:#b8bb26;">&quot;joex1&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># This is the base URL this application is deployed to. This is used
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># to register this joex instance such that docspell rest servers can
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># reach them
</span><span style="color:#fdf4c1;">  base-url = </span><span style="color:#b8bb26;">&quot;http://localhost:7878&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># Where the REST server binds to.
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># JOEX provides a very simple REST interface to inspect its state.
</span><span style="color:#fdf4c1;">  bind {
</span><span style="color:#fdf4c1;">    address = </span><span style="color:#b8bb26;">&quot;localhost&quot;
</span><span style="color:#fdf4c1;">    port = 7878
</span><span style="color:#fdf4c1;">  }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># The database connection.
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># It must be the same connection as the rest server is using.
</span><span style="color:#fdf4c1;">  jdbc {
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># The JDBC url to the database. By default a H2 file-based
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># database is configured. You can provide a postgresql or mariadb
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># connection here. When using H2 use the PostgreSQL compatibility
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># mode and AUTO_SERVER feature.
</span><span style="color:#fdf4c1;">    url = </span><span style="color:#b8bb26;">&quot;jdbc:h2://&quot;</span><span style="color:#fdf4c1;">${java.io.tmpdir}</span><span style="color:#b8bb26;">&quot;/docspell-demo.db;MODE=PostgreSQL;DATABASE_TO_LOWER=TRUE;AUTO_SERVER=TRUE&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># The database user.
</span><span style="color:#fdf4c1;">    user = </span><span style="color:#b8bb26;">&quot;sa&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># The database password.
</span><span style="color:#fdf4c1;">    password = </span><span style="color:#b8bb26;">&quot;&quot;
</span><span style="color:#fdf4c1;">  }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># Enable or disable debugging for e-mail related functionality. This
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># applies to both sending and receiving mails. For security reasons
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># logging is not very extensive on authentication failures. Setting
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># this to true, results in a lot of data printed to stdout.
</span><span style="color:#fdf4c1;">  mail-debug = false
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  send-mail {
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># This is used as the List-Id e-mail header when mails are sent
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># from docspell to its users (example: for notification mails). It
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># is not used when sending to external recipients. If it is empty,
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># no such header is added. Using this header is often useful when
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># filtering mails.
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># It should be a string in angle brackets. See
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># https://tools.ietf.org/html/rfc2919 for a formal specification
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># of this header.
</span><span style="color:#fdf4c1;">    list-id = </span><span style="color:#b8bb26;">&quot;&quot;
</span><span style="color:#fdf4c1;">  }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># Configuration for the job scheduler.
</span><span style="color:#fdf4c1;">  scheduler {
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Each scheduler needs a unique name. This defaults to the node
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># name, which must be unique, too.
</span><span style="color:#fdf4c1;">    name = ${docspell.joex.app</span><span style="color:#fe8019;">-</span><span style="color:#fdf4c1;">id}
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Number of processing allowed in parallel.
</span><span style="color:#fdf4c1;">    pool-size = 1
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># A counting scheme determines the ratio of how high- and low-prio
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># jobs are run. For example: 4,1 means run 4 high prio jobs, then
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># 1 low prio and then start over.
</span><span style="color:#fdf4c1;">    counting-scheme = </span><span style="color:#b8bb26;">&quot;4,1&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># How often a failed job should be retried until it enters failed
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># state. If a job fails, it becomes &quot;stuck&quot; and will be retried
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># after a delay.
</span><span style="color:#fdf4c1;">    retries = 2
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># The delay until the next try is performed for a failed job. This
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># delay is increased exponentially with the number of retries.
</span><span style="color:#fdf4c1;">    retry-delay = </span><span style="color:#b8bb26;">&quot;1 minute&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># The queue size of log statements from a job.
</span><span style="color:#fdf4c1;">    log-buffer-size = 500
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># If no job is left in the queue, the scheduler will wait until a
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># notify is requested (using the REST interface). To also retry
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># stuck jobs, it will notify itself periodically.
</span><span style="color:#fdf4c1;">    wakeup-period = </span><span style="color:#b8bb26;">&quot;30 minutes&quot;
</span><span style="color:#fdf4c1;">  }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  periodic-scheduler {
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Each scheduler needs a unique name. This defaults to the node
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># name, which must be unique, too.
</span><span style="color:#fdf4c1;">    name = ${docspell.joex.app</span><span style="color:#fe8019;">-</span><span style="color:#fdf4c1;">id}
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># A fallback to start looking for due periodic tasks regularily.
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Usually joex instances should be notified via REST calls if
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># external processes change tasks. But these requests may get
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># lost.
</span><span style="color:#fdf4c1;">    wakeup-period = </span><span style="color:#b8bb26;">&quot;10 minutes&quot;
</span><span style="color:#fdf4c1;">  }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># Configuration for the user-tasks.
</span><span style="color:#fdf4c1;">  user-tasks {
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Allows to import e-mails by scanning a mailbox.
</span><span style="color:#fdf4c1;">    scan-mailbox {
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># A limit of how many folders to scan through. If a user
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># configures more than this, only upto this limit folders are
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># scanned and a warning is logged.
</span><span style="color:#fdf4c1;">      max-folders = 50
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># How many mails (headers only) to retrieve in one chunk.
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># If this is greater than `max-mails&#39; it is set automatically to
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># the value of `max-mails&#39;.
</span><span style="color:#fdf4c1;">      mail-chunk-size = 50
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># A limit on how many mails to process in one job run. This is
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># meant to avoid too heavy resource allocation to one
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># user/collective.
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># If more than this number of mails is encountered, a warning is
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># logged.
</span><span style="color:#fdf4c1;">      max-mails = 500
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">  }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># Docspell uses periodic house keeping tasks, like cleaning expired
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># invites, that can be configured here.
</span><span style="color:#fdf4c1;">  house-keeping {
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># When the house keeping tasks execute. Default is to run every
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># week.
</span><span style="color:#fdf4c1;">    schedule = </span><span style="color:#b8bb26;">&quot;Sun *-*-* 00:00:00&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># This task removes invitation keys that have been created but not
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># used. The timespan here must be greater than the `invite-time&#39;
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># setting in the rest server config file.
</span><span style="color:#fdf4c1;">    cleanup-invites = {
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># Whether this task is enabled.
</span><span style="color:#fdf4c1;">      enabled = true
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># The minimum age of invites to be deleted.
</span><span style="color:#fdf4c1;">      older-than = </span><span style="color:#b8bb26;">&quot;30 days&quot;
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># This task removes expired remember-me tokens. The timespan
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># should be greater than the `valid` time in the restserver
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># config.
</span><span style="color:#fdf4c1;">    cleanup-remember-me = {
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># Whether the job is enabled.
</span><span style="color:#fdf4c1;">      enabled = true
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># The minimum age of tokens to be deleted.
</span><span style="color:#fdf4c1;">      older-than = </span><span style="color:#b8bb26;">&quot;30 days&quot;
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Jobs store their log output in the database. Normally this data
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># is only interesting for some period of time. The processing logs
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># of old files can be removed eventually.
</span><span style="color:#fdf4c1;">    cleanup-jobs = {
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># Whether this task is enabled.
</span><span style="color:#fdf4c1;">      enabled = true
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># The minimum age of jobs to delete. It is matched against the
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># `finished&#39; timestamp.
</span><span style="color:#fdf4c1;">      older-than = </span><span style="color:#b8bb26;">&quot;30 days&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># This defines how many jobs are deleted in one transaction.
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># Since the data to delete may get large, it can be configured
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># whether more or less memory should be used.
</span><span style="color:#fdf4c1;">      delete-batch = </span><span style="color:#b8bb26;">&quot;100&quot;
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Removes node entries that are not reachable anymore.
</span><span style="color:#fdf4c1;">    check-nodes {
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># Whether this task is enabled
</span><span style="color:#fdf4c1;">      enabled = true
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># How often the node must be unreachable, before it is removed.
</span><span style="color:#fdf4c1;">      min-not-found = 2
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">  }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># A periodic task to check for new releases of docspell. It can
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># inform about a new release via e-mail. You need to specify an
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># account that has SMTP settings to use for sending.
</span><span style="color:#fdf4c1;">  update-check {
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Whether to enable this task
</span><span style="color:#fdf4c1;">    enabled = false
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Sends the mail without checking the latest release. Can be used
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># if you want to see if mail sending works, but don&#39;t want to wait
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># until a new release is published.
</span><span style="color:#fdf4c1;">    test-run = false
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># When the update check should execute. Default is to run every
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># week.
</span><span style="color:#fdf4c1;">    schedule = </span><span style="color:#b8bb26;">&quot;Sun *-*-* 00:00:00&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># An account id in form of `collective/user` (or just `user` if
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># collective and user name are the same). This user account must
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># have at least one valid SMTP settings which are used to send the
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># mail.
</span><span style="color:#fdf4c1;">    sender-account = </span><span style="color:#b8bb26;">&quot;&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># The SMTP connection id that should be used for sending the mail.
</span><span style="color:#fdf4c1;">    smtp-id = </span><span style="color:#b8bb26;">&quot;&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># A list of recipient e-mail addresses.
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Example: `[ &quot;john.doe@gmail.com&quot; ]`
</span><span style="color:#fdf4c1;">    recipients = </span><span style="color:#fa5c4b;">[]
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># The subject of the mail. It supports the same variables as the
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># body.
</span><span style="color:#fdf4c1;">    subject = </span><span style="color:#b8bb26;">&quot;Docspell {{ latestVersion }} is available&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># The body of the mail. Subject and body can contain these
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># variables which are replaced:
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># - `latestVersion` the latest available version of Docspell
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># - `currentVersion` the currently running (old) version of Docspell
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># - `releasedAt` a date when the release was published
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># The body is processed as markdown after the variables have been
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># replaced.
</span><span style="color:#fdf4c1;">    body = </span><span style="color:#b8bb26;">&quot;&quot;&quot;
</span><span style="color:#b8bb26;">Hello,
</span><span style="color:#b8bb26;">
</span><span style="color:#b8bb26;">You are currently running Docspell {{ currentVersion }}. Version *{{ latestVersion }}*
</span><span style="color:#b8bb26;">is now available, which was released on {{ releasedAt }}. Check the release page at:
</span><span style="color:#b8bb26;">
</span><span style="color:#b8bb26;">&lt;https://github.com/eikek/docspell/releases/latest&gt;
</span><span style="color:#b8bb26;">
</span><span style="color:#b8bb26;">Have a nice day!
</span><span style="color:#b8bb26;">
</span><span style="color:#b8bb26;">Docpell Update Check
</span><span style="color:#b8bb26;">&quot;&quot;&quot;
</span><span style="color:#fdf4c1;">  }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># Configuration of text extraction
</span><span style="color:#fdf4c1;">  extraction {
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># For PDF files it is first tried to read the text parts of the
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># PDF. But PDFs can be complex documents and they may contain text
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># and images. If the returned text is shorter than the value
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># below, OCR is run afterwards. Then both extracted texts are
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># compared and the longer will be used.
</span><span style="color:#fdf4c1;">    pdf {
</span><span style="color:#fdf4c1;">      min-text-len = 500
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    preview {
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># When rendering a pdf page, use this dpi. This results in
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># scaling the image. A standard A4 page rendered at 96dpi
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># results in roughly 790x1100px image. Using 32 results in
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># roughly 200x300px image.
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># Note, when this is changed, you might want to re-generate
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># preview images. Check the api for this, there is an endpoint
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># to regenerate all for a collective.
</span><span style="color:#fdf4c1;">      dpi = 32
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Extracting text using OCR works for image and pdf files. It will
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># first run ghostscript to create a gray image from a pdf. Then
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># unpaper is run to optimize the image for the upcoming ocr, which
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># will be done by tesseract. All these programs must be available
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># in your PATH or the absolute path can be specified below.
</span><span style="color:#fdf4c1;">    ocr {
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># Images greater than this size are skipped. Note that every
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># image is loaded completely into memory for doing OCR. This is
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># the pixel count, `height * width` of the image.
</span><span style="color:#fdf4c1;">      max-image-size = 14000000
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># Defines what pages to process. If a PDF with 600 pages is
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># submitted, it is probably not necessary to scan through all of
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># them. This would take a long time and occupy resources for no
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># value. The first few pages should suffice. The default is first
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># 10 pages.
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># If you want all pages being processed, set this number to -1.
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># Note: if you change the ghostscript command below, be aware that
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># this setting (if not -1) will add another parameter to the
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># beginning of the command.
</span><span style="color:#fdf4c1;">      page-range {
</span><span style="color:#fdf4c1;">        begin = 10
</span><span style="color:#fdf4c1;">      }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># The ghostscript command.
</span><span style="color:#fdf4c1;">      ghostscript {
</span><span style="color:#fdf4c1;">        command {
</span><span style="color:#fdf4c1;">          program = </span><span style="color:#b8bb26;">&quot;gs&quot;
</span><span style="color:#fdf4c1;">          args = [ </span><span style="color:#b8bb26;">&quot;-dNOPAUSE&quot;
</span><span style="color:#fdf4c1;">                 , </span><span style="color:#b8bb26;">&quot;-dBATCH&quot;
</span><span style="color:#fdf4c1;">                 , </span><span style="color:#b8bb26;">&quot;-dSAFER&quot;
</span><span style="color:#fdf4c1;">                 , </span><span style="color:#b8bb26;">&quot;-sDEVICE=tiffscaled8&quot;
</span><span style="color:#fdf4c1;">                 , </span><span style="color:#b8bb26;">&quot;-sOutputFile={{outfile}}&quot;
</span><span style="color:#fdf4c1;">                 , </span><span style="color:#b8bb26;">&quot;{{infile}}&quot;
</span><span style="color:#fdf4c1;">                 ]
</span><span style="color:#fdf4c1;">          timeout = </span><span style="color:#b8bb26;">&quot;5 minutes&quot;
</span><span style="color:#fdf4c1;">        }
</span><span style="color:#fdf4c1;">        working-dir = ${java.io.tmpdir}</span><span style="color:#b8bb26;">&quot;/docspell-extraction&quot;
</span><span style="color:#fdf4c1;">      }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># The unpaper command.
</span><span style="color:#fdf4c1;">      unpaper {
</span><span style="color:#fdf4c1;">        command {
</span><span style="color:#fdf4c1;">          program = </span><span style="color:#b8bb26;">&quot;unpaper&quot;
</span><span style="color:#fdf4c1;">          args = </span><span style="color:#fa5c4b;">[ </span><span style="color:#b8bb26;">&quot;{{infile}}&quot;</span><span style="color:#fdf4c1;">, </span><span style="color:#b8bb26;">&quot;{{outfile}}&quot; </span><span style="color:#fa5c4b;">]
</span><span style="color:#fdf4c1;">          timeout = </span><span style="color:#b8bb26;">&quot;5 minutes&quot;
</span><span style="color:#fdf4c1;">        }
</span><span style="color:#fdf4c1;">      }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># The tesseract command.
</span><span style="color:#fdf4c1;">      tesseract {
</span><span style="color:#fdf4c1;">        command {
</span><span style="color:#fdf4c1;">          program = </span><span style="color:#b8bb26;">&quot;tesseract&quot;
</span><span style="color:#fdf4c1;">          args = [</span><span style="color:#b8bb26;">&quot;{{file}}&quot;
</span><span style="color:#fdf4c1;">                 , </span><span style="color:#b8bb26;">&quot;stdout&quot;
</span><span style="color:#fdf4c1;">                 , </span><span style="color:#b8bb26;">&quot;-l&quot;
</span><span style="color:#fdf4c1;">                 , </span><span style="color:#b8bb26;">&quot;{{lang}}&quot;
</span><span style="color:#fdf4c1;">                 ]
</span><span style="color:#fdf4c1;">          timeout = </span><span style="color:#b8bb26;">&quot;5 minutes&quot;
</span><span style="color:#fdf4c1;">        }
</span><span style="color:#fdf4c1;">      }
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">  }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># Settings for text analysis
</span><span style="color:#fdf4c1;">  text-analysis {
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Maximum length of text to be analysed.
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># All text to analyse must fit into RAM. A large document may take
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># too much heap. Also, most important information is at the
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># beginning of a document, so in most cases the first two pages
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># should suffice. Default is 5000, which are about 2 pages (just a
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># rough guess, of course). For my data, more than 80% of the
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># documents are less than 5000 characters.
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># This values applies to nlp and the classifier. If this value is
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># &lt;= 0, the limit is disabled.
</span><span style="color:#fdf4c1;">    max-length = 5000
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># A working directory for the analyser to store temporary/working
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># files.
</span><span style="color:#fdf4c1;">    working-dir = ${java.io.tmpdir}</span><span style="color:#b8bb26;">&quot;/docspell-analysis&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    nlp {
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># The mode for configuring NLP models:
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># 1. full – builds the complete pipeline
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># 2. basic - builds only the ner annotator
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># 3. regexonly - matches each entry in your address book via regexps
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># 4. disabled - doesn&#39;t use any stanford-nlp feature
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># The full and basic variants rely on pre-build language models
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># that are available for only a few languages. Memory usage
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># varies among the languages. So joex should run with -Xmx1400M
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># at least when using mode=full.
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># The basic variant does a quite good job for German and
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># English. It might be worse for French, always depending on the
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># type of text that is analysed. Joex should run with about 500M
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># heap, here again lanugage German uses the most.
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># The regexonly variant doesn&#39;t depend on a language. It roughly
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># works by converting all entries in your addressbook into
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># regexps and matches each one against the text. This can get
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># memory intensive, too, when the addressbook grows large. This
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># is included in the full and basic by default, but can be used
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># independently by setting mode=regexner.
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># When mode=disabled, then the whole nlp pipeline is disabled,
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># and you won&#39;t get any suggestions. Only what the classifier
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># returns (if enabled).
</span><span style="color:#fdf4c1;">      mode = full
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># The StanfordCoreNLP library caches language models which
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># requires quite some amount of memory. Setting this interval to a
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># positive duration, the cache is cleared after this amount of
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># idle time. Set it to 0 to disable it if you have enough memory,
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># processing will be faster.
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># This has only any effect, if mode != disabled.
</span><span style="color:#fdf4c1;">      clear-interval = </span><span style="color:#b8bb26;">&quot;15 minutes&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># Restricts proposals for due dates. Only dates earlier than this
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># number of years in the future are considered.
</span><span style="color:#fdf4c1;">      max-due-date-years = 10
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">      regex-ner {
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># Whether to enable custom NER annotation. This uses the
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># address book of a collective as input for NER tagging (to
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># automatically find correspondent and concerned entities). If
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># the address book is large, this can be quite memory
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># intensive and also makes text analysis much slower. But it
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># improves accuracy and can be used independent of the
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># lanugage. If this is set to 0, it is effectively disabled
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># and NER tagging uses only statistical models (that also work
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># quite well, but are restricted to the languages mentioned
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># above).
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># Note, this is only relevant if nlp-config.mode is not
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># &quot;disabled&quot;.
</span><span style="color:#fdf4c1;">        max-entries = 1000
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># The NER annotation uses a file of patterns that is derived
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># from a collective&#39;s address book. This is is the time how
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># long this data will be kept until a check for a state change
</span><span style="color:#fdf4c1;">        </span><span style="font-style:italic;color:#928374;"># is done.
</span><span style="color:#fdf4c1;">        file-cache-time = </span><span style="color:#b8bb26;">&quot;1 minute&quot;
</span><span style="color:#fdf4c1;">      }
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Settings for doing document classification.
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># This works by learning from existing documents. This requires a
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># satstical model that is computed from all existing documents.
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># This process is run periodically as configured by the
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># collective. It may require more memory, depending on the amount
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># of data.
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># It utilises this NLP library: https://nlp.stanford.edu/.
</span><span style="color:#fdf4c1;">    classification {
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># Whether to enable classification globally. Each collective can
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># enable/disable auto-tagging. The classifier is also used for
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># finding correspondents and concerned entities, if enabled
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># here.
</span><span style="color:#fdf4c1;">      enabled = true
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># If concerned with memory consumption, this restricts the
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># number of items to consider. More are better for training. A
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># negative value or zero means to train on all items.
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># This limit and `text-analysis.max-length` define how much
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># memory is required. On weaker hardware, it is advised to play
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># with these values.
</span><span style="color:#fdf4c1;">      item-count = 600
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># These settings are used to configure the classifier. If
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># multiple are given, they are all tried and the &quot;best&quot; is
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># chosen at the end. See
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># https://nlp.stanford.edu/nlp/javadoc/javanlp/edu/stanford/nlp/classify/ColumnDataClassifier.html
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># for more info about these settings. The settings here yielded
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># good results with *my* dataset.
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># Enclose regexps in triple quotes.
</span><span style="color:#fdf4c1;">      classifiers = [
</span><span style="color:#fdf4c1;">        { </span><span style="color:#b8bb26;">&quot;useSplitWords&quot;</span><span style="color:#fdf4c1;"> = </span><span style="color:#b8bb26;">&quot;true&quot;
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;splitWordsTokenizerRegexp&quot;</span><span style="color:#fdf4c1;"> = </span><span style="color:#b8bb26;">&quot;&quot;&quot;[\p{L}][\p{L}0-9]*|(?:\$ ?)?[0-9]+(?:\.[0-9]{2})?%?|\s+|.&quot;&quot;&quot;
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;splitWordsIgnoreRegexp&quot;</span><span style="color:#fdf4c1;"> = </span><span style="color:#b8bb26;">&quot;&quot;&quot;\s+&quot;&quot;&quot;
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;useSplitPrefixSuffixNGrams&quot;</span><span style="color:#fdf4c1;"> = </span><span style="color:#b8bb26;">&quot;true&quot;
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;maxNGramLeng&quot;</span><span style="color:#fdf4c1;"> = </span><span style="color:#b8bb26;">&quot;4&quot;
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;minNGramLeng&quot;</span><span style="color:#fdf4c1;"> = </span><span style="color:#b8bb26;">&quot;1&quot;
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;splitWordShape&quot;</span><span style="color:#fdf4c1;"> = </span><span style="color:#b8bb26;">&quot;chris4&quot;
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;intern&quot;</span><span style="color:#fdf4c1;"> = </span><span style="color:#b8bb26;">&quot;true&quot; </span><span style="font-style:italic;color:#928374;"># makes it slower but saves memory
</span><span style="color:#fdf4c1;">        }
</span><span style="color:#fdf4c1;">      ]
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">  }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># Configuration for converting files into PDFs.
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># Most of it is delegated to external tools, which can be configured
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># below. They must be in the PATH environment or specify the full
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># path below via the `program` key.
</span><span style="color:#fdf4c1;">  convert {
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># The chunk size used when storing files. This should be the same
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># as used with the rest server.
</span><span style="color:#fdf4c1;">    chunk-size = ${docspell.joex.files.chunk</span><span style="color:#fe8019;">-</span><span style="color:#fdf4c1;">size}
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># A string used to change the filename of the converted pdf file.
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># If empty, the original file name is used for the pdf file ( the
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># extension is always replaced with `pdf`).
</span><span style="color:#fdf4c1;">    converted-filename-part = </span><span style="color:#b8bb26;">&quot;converted&quot;
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># When reading images, this is the maximum size. Images that are
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># larger are not processed.
</span><span style="color:#fdf4c1;">    max-image-size = ${docspell.joex.extraction.ocr.max</span><span style="color:#fe8019;">-</span><span style="color:#fdf4c1;">image-size}
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Settings when processing markdown files (and other text files)
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># to HTML.
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># In order to support text formats, text files are first converted
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># to HTML using a markdown processor. The resulting HTML is then
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># converted to a PDF file.
</span><span style="color:#fdf4c1;">    markdown {
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># The CSS that is used to style the resulting HTML.
</span><span style="color:#fdf4c1;">      internal-css = </span><span style="color:#b8bb26;">&quot;&quot;&quot;
</span><span style="color:#b8bb26;">        body { padding: 2em 5em; }
</span><span style="color:#b8bb26;">      &quot;&quot;&quot;
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># To convert HTML files into PDF files, the external tool
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># wkhtmltopdf is used.
</span><span style="color:#fdf4c1;">    wkhtmlpdf {
</span><span style="color:#fdf4c1;">      command = {
</span><span style="color:#fdf4c1;">        program = </span><span style="color:#b8bb26;">&quot;wkhtmltopdf&quot;
</span><span style="color:#fdf4c1;">        args = [
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;-s&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;A4&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;--encoding&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;{{encoding}}&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;--load-error-handling&quot;</span><span style="color:#fdf4c1;">, </span><span style="color:#b8bb26;">&quot;ignore&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;--load-media-error-handling&quot;</span><span style="color:#fdf4c1;">, </span><span style="color:#b8bb26;">&quot;ignore&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;-&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;{{outfile}}&quot;
</span><span style="color:#fdf4c1;">        ]
</span><span style="color:#fdf4c1;">        timeout = </span><span style="color:#b8bb26;">&quot;2 minutes&quot;
</span><span style="color:#fdf4c1;">      }
</span><span style="color:#fdf4c1;">      working-dir = ${java.io.tmpdir}</span><span style="color:#b8bb26;">&quot;/docspell-convert&quot;
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># To convert image files to PDF files, tesseract is used. This
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># also extracts the text in one go.
</span><span style="color:#fdf4c1;">    tesseract = {
</span><span style="color:#fdf4c1;">      command = {
</span><span style="color:#fdf4c1;">        program = </span><span style="color:#b8bb26;">&quot;tesseract&quot;
</span><span style="color:#fdf4c1;">        args = [
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;{{infile}}&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;out&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;-l&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;{{lang}}&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;pdf&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;txt&quot;
</span><span style="color:#fdf4c1;">        ]
</span><span style="color:#fdf4c1;">        timeout = </span><span style="color:#b8bb26;">&quot;5 minutes&quot;
</span><span style="color:#fdf4c1;">      }
</span><span style="color:#fdf4c1;">      working-dir = ${java.io.tmpdir}</span><span style="color:#b8bb26;">&quot;/docspell-convert&quot;
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># To convert &quot;office&quot; files to PDF files, the external tool
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># unoconv is used. Unoconv uses libreoffice/openoffice for
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># converting. So it supports all formats that are possible to read
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># with libreoffice/openoffic.
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Note: to greatly improve performance, it is recommended to start
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># a libreoffice listener by running `unoconv -l` in a separate
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># process.
</span><span style="color:#fdf4c1;">    unoconv = {
</span><span style="color:#fdf4c1;">      command = {
</span><span style="color:#fdf4c1;">        program = </span><span style="color:#b8bb26;">&quot;unoconv&quot;
</span><span style="color:#fdf4c1;">        args = [
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;-f&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;pdf&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;-o&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;{{outfile}}&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;{{infile}}&quot;
</span><span style="color:#fdf4c1;">        ]
</span><span style="color:#fdf4c1;">        timeout = </span><span style="color:#b8bb26;">&quot;2 minutes&quot;
</span><span style="color:#fdf4c1;">      }
</span><span style="color:#fdf4c1;">      working-dir = ${java.io.tmpdir}</span><span style="color:#b8bb26;">&quot;/docspell-convert&quot;
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># The tool ocrmypdf can be used to convert pdf files to pdf files
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># in order to add extracted text as a separate layer. This makes
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># image-only pdfs searchable and you can select and copy/paste the
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># text. It also converts pdfs into pdf/a type pdfs, which are best
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># suited for archiving. So it makes sense to use this even for
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># text-only pdfs.
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># It is recommended to install ocrympdf, but it also is optional.
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># If it is enabled but fails, the error is not fatal and the
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># processing will continue using the original pdf for extracting
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># text. You can also disable it to remove the errors from the
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># processing logs.
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># The `--skip-text` option is necessary to not fail on &quot;text&quot; pdfs
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># (where ocr is not necessary). In this case, the pdf will be
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># converted to PDF/A.
</span><span style="color:#fdf4c1;">    ocrmypdf = {
</span><span style="color:#fdf4c1;">      enabled = true
</span><span style="color:#fdf4c1;">      command = {
</span><span style="color:#fdf4c1;">        program = </span><span style="color:#b8bb26;">&quot;ocrmypdf&quot;
</span><span style="color:#fdf4c1;">        args = [
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;-l&quot;</span><span style="color:#fdf4c1;">, </span><span style="color:#b8bb26;">&quot;{{lang}}&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;--skip-text&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;--deskew&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;-j&quot;</span><span style="color:#fdf4c1;">, </span><span style="color:#b8bb26;">&quot;1&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;{{infile}}&quot;</span><span style="color:#fdf4c1;">,
</span><span style="color:#fdf4c1;">          </span><span style="color:#b8bb26;">&quot;{{outfile}}&quot;
</span><span style="color:#fdf4c1;">        ]
</span><span style="color:#fdf4c1;">        timeout = </span><span style="color:#b8bb26;">&quot;5 minutes&quot;
</span><span style="color:#fdf4c1;">      }
</span><span style="color:#fdf4c1;">      working-dir = ${java.io.tmpdir}</span><span style="color:#b8bb26;">&quot;/docspell-convert&quot;
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Allows to try to decrypt a PDF with encryption or protection. If
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># enabled, a PDFs encryption or protection will be removed during
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># conversion.
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># For encrypted PDFs, this is necessary to be processed, because
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># docspell needs to read it. It also requires to specify a
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># password here. All passwords are tried when reading a PDF.
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># This is enabled by default with an empty password list. This
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># removes protection from PDFs, which is better for processing.
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Passwords can be given here and each collective can maintain
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># their passwords as well. But if the `enabled` setting below is
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># `false`, then no attempt at decrypting is done.
</span><span style="color:#fdf4c1;">    decrypt-pdf = {
</span><span style="color:#fdf4c1;">      enabled = true
</span><span style="color:#fdf4c1;">      passwords = </span><span style="color:#fa5c4b;">[]
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">  }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># The same section is also present in the rest-server config. It is
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># used when submitting files into the job queue for processing.
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># Currently, these settings may affect memory usage of all nodes, so
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># it should be the same on all nodes.
</span><span style="color:#fdf4c1;">  files {
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Defines the chunk size (in bytes) used to store the files.
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># This will affect the memory footprint when uploading and
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># downloading files. At most this amount is loaded into RAM for
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># down- and uploading.
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># It also defines the chunk size used for the blobs inside the
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># database.
</span><span style="color:#fdf4c1;">    chunk-size = 524288
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># The file content types that are considered valid. Docspell
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># will only pass these files to processing. The processing code
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># itself has also checks for which files are supported and which
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># not. This affects the uploading part and can be used to
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># restrict file types that should be handed over to processing.
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># By default all files are allowed.
</span><span style="color:#fdf4c1;">    valid-mime-types = </span><span style="color:#fa5c4b;">[ ]
</span><span style="color:#fdf4c1;">  }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">  </span><span style="font-style:italic;color:#928374;"># Configuration of the full-text search engine.
</span><span style="color:#fdf4c1;">  full-text-search {
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># The full-text search feature can be disabled. It requires an
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># additional index server which needs additional memory and disk
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># space. It can be enabled later any time.
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;">#
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Currently the SOLR search platform is supported.
</span><span style="color:#fdf4c1;">    enabled = false
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Configuration for the SOLR backend.
</span><span style="color:#fdf4c1;">    solr = {
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># The URL to solr
</span><span style="color:#fdf4c1;">      url = </span><span style="color:#b8bb26;">&quot;http://localhost:8983/solr/docspell&quot;
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># Used to tell solr when to commit the data
</span><span style="color:#fdf4c1;">      commit-within = 1000
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># If true, logs request and response bodies
</span><span style="color:#fdf4c1;">      log-verbose = false
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># The defType parameter to lucene that defines the parser to
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># use. You might want to try &quot;edismax&quot; or look here:
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># https://solr.apache.org/guide/8_4/query-syntax-and-parsing.html#query-syntax-and-parsing
</span><span style="color:#fdf4c1;">      def-type = </span><span style="color:#b8bb26;">&quot;lucene&quot;
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># The default combiner for tokens. One of {AND, OR}.
</span><span style="color:#fdf4c1;">      q-op = </span><span style="color:#b8bb26;">&quot;OR&quot;
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">
</span><span style="color:#fdf4c1;">    </span><span style="font-style:italic;color:#928374;"># Settings for running the index migration tasks
</span><span style="color:#fdf4c1;">    migration = {
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># Chunk size to use when indexing data from the database. This
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># many attachments are loaded into memory and pushed to the
</span><span style="color:#fdf4c1;">      </span><span style="font-style:italic;color:#928374;"># full-text index.
</span><span style="color:#fdf4c1;">      index-all-chunk = 10
</span><span style="color:#fdf4c1;">    }
</span><span style="color:#fdf4c1;">  }
</span><span style="color:#fdf4c1;">}
</span></code></pre>
<h2 id="environment-variables">Environment Variables<a class="zola-anchor" href="#environment-variables" aria-label="Anchor link for: environment-variables">🔗</a></h2>
<p>Environment variables can be used when there is no config file
supplied. The listing below shows all possible variables and their
default values.</p>
<pre data-lang="bash" style="background-color:#282828;color:#fdf4c1aa;" class="language-bash "><code class="language-bash" data-lang="bash"><span>
</span><span style="font-style:italic;color:#928374;">#### Server Configuration ####
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The secret. If empty, the endpoint is disabled.
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_ADMIN__ENDPOINT_SECRET</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  This is the id of this node. If you run more than one server, you
</span><span style="font-style:italic;color:#928374;">#  have to make sure to provide unique ids per node.
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_APP__ID</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;rest1&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  This is shown in the top right corner of the web application
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_APP__NAME</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;Docspell&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_AUTH_REMEMBER__ME_ENABLED</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">true
</span><span>
</span><span style="font-style:italic;color:#928374;">#  How long the remember me cookie/token is valid.
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_AUTH_REMEMBER__ME_VALID</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;30 days&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The secret for this server that is used to sign the authenicator
</span><span style="font-style:italic;color:#928374;">#  tokens. If multiple servers are running, all must share the same
</span><span style="font-style:italic;color:#928374;">#  secret. You can use base64 or hex strings (prefix with b64: and
</span><span style="font-style:italic;color:#928374;">#  hex:, respectively). If empty, a random secret is generated.
</span><span style="font-style:italic;color:#928374;">#  Example: b64:YRx77QujCGkHSvll0TVEmtTaw3Z5eXr+nWMsEJowgKg=
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_AUTH_SERVER__SECRET</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  How long an authentication token is valid. The web application
</span><span style="font-style:italic;color:#928374;">#  will get a new one periodically.
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_AUTH_SESSION__VALID</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;5 minutes&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  Defines the chunk size (in bytes) used to store the files.
</span><span style="font-style:italic;color:#928374;">#  This will affect the memory footprint when uploading and
</span><span style="font-style:italic;color:#928374;">#  downloading files. At most this amount is loaded into RAM for
</span><span style="font-style:italic;color:#928374;">#  down- and uploading.
</span><span style="font-style:italic;color:#928374;"># 
</span><span style="font-style:italic;color:#928374;">#  It also defines the chunk size used for the blobs inside the
</span><span style="font-style:italic;color:#928374;">#  database.
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_BACKEND_FILES_CHUNK__SIZE</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">524288
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The database password.
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_BACKEND_JDBC_PASSWORD</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_BACKEND_JDBC_URL</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;jdbc:h2:///tmp/docspell-demo.db;MODE=PostgreSQL;DATABASE_TO_LOWER=TRUE;AUTO_SERVER=TRUE&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The database user.
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_BACKEND_JDBC_USER</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;sa&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  Enable or disable debugging for e-mail related functionality. This
</span><span style="font-style:italic;color:#928374;">#  applies to both sending and receiving mails. For security reasons
</span><span style="font-style:italic;color:#928374;">#  logging is not very extensive on authentication failures. Setting
</span><span style="font-style:italic;color:#928374;">#  this to true, results in a lot of data printed to stdout.
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_BACKEND_MAIL__DEBUG</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">false
</span><span>
</span><span style="font-style:italic;color:#928374;">#  If mode == &#39;invite&#39;, this is the period an invitation token is
</span><span style="font-style:italic;color:#928374;">#  considered valid.
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_BACKEND_SIGNUP_INVITE__TIME</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;3 days&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The mode defines if new users can signup or not. It can have
</span><span style="font-style:italic;color:#928374;">#  three values:
</span><span style="font-style:italic;color:#928374;"># 
</span><span style="font-style:italic;color:#928374;">#  - open: every new user can sign up
</span><span style="font-style:italic;color:#928374;">#  - invite: new users can sign up only if they provide a correct
</span><span style="font-style:italic;color:#928374;">#    invitation key. Invitation keys can be generated by the
</span><span style="font-style:italic;color:#928374;">#    server.
</span><span style="font-style:italic;color:#928374;">#  - closed: signing up is disabled.
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_BACKEND_SIGNUP_MODE</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;open&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  If mode == &#39;invite&#39;, a password must be provided to generate
</span><span style="font-style:italic;color:#928374;">#  invitation keys. It must not be empty.
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_BACKEND_SIGNUP_NEW__INVITE__PASSWORD</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  This is the base URL this application is deployed to. This is used
</span><span style="font-style:italic;color:#928374;">#  to create absolute URLs and to configure the cookie.
</span><span style="font-style:italic;color:#928374;"># 
</span><span style="font-style:italic;color:#928374;">#  If default is not changed, the HOST line of the login request is
</span><span style="font-style:italic;color:#928374;">#  used instead or the value of the `X-Forwarded-For` header. If set
</span><span style="font-style:italic;color:#928374;">#  to some other value, the request is not inspected.
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_BASE__URL</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;http://localhost:7880&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_BIND_ADDRESS</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;localhost&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_BIND_PORT</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">7880
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The full-text search feature can be disabled. It requires an
</span><span style="font-style:italic;color:#928374;">#  additional index server which needs additional memory and disk
</span><span style="font-style:italic;color:#928374;">#  space. It can be enabled later any time.
</span><span style="font-style:italic;color:#928374;"># 
</span><span style="font-style:italic;color:#928374;">#  Currently the SOLR search platform is supported.
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_FULL__TEXT__SEARCH_ENABLED</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">false
</span><span>
</span><span style="font-style:italic;color:#928374;">#  Used to tell solr when to commit the data
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_FULL__TEXT__SEARCH_SOLR_COMMIT__WITHIN</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">1000
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The defType parameter to lucene that defines the parser to
</span><span style="font-style:italic;color:#928374;">#  use. You might want to try &quot;edismax&quot; or look here:
</span><span style="font-style:italic;color:#928374;">#  https://solr.apache.org/guide/8_4/query-syntax-and-parsing.html#query-syntax-and-parsing
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_FULL__TEXT__SEARCH_SOLR_DEF__TYPE</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;lucene&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  If true, logs request and response bodies
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_FULL__TEXT__SEARCH_SOLR_LOG__VERBOSE</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">false
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The default combiner for tokens. One of {AND, OR}.
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_FULL__TEXT__SEARCH_SOLR_Q__OP</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;OR&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The URL to solr
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_FULL__TEXT__SEARCH_SOLR_URL</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;http://localhost:8983/solr/docspell&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_INTEGRATION__ENDPOINT_ALLOWED__IPS_ENABLED</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">false
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_INTEGRATION__ENDPOINT_ENABLED</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">false
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_INTEGRATION__ENDPOINT_HTTP__BASIC_ENABLED</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">false
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_INTEGRATION__ENDPOINT_HTTP__BASIC_PASSWORD</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;docspell-int&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_INTEGRATION__ENDPOINT_HTTP__BASIC_REALM</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;Docspell Integration&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_INTEGRATION__ENDPOINT_HTTP__BASIC_USER</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;docspell-int&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_INTEGRATION__ENDPOINT_HTTP__HEADER_ENABLED</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">false
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_INTEGRATION__ENDPOINT_HTTP__HEADER_HEADER__NAME</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;Docspell-Integration&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_INTEGRATION__ENDPOINT_HTTP__HEADER_HEADER__VALUE</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;some-secret&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The priority to use when submitting files through this endpoint.
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_INTEGRATION__ENDPOINT_PRIORITY</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;low&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The name used for the item &quot;source&quot; property when uploaded
</span><span style="font-style:italic;color:#928374;">#  through this endpoint.
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_INTEGRATION__ENDPOINT_SOURCE__NAME</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;integration&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  This url is the base url for reaching this server internally.
</span><span style="font-style:italic;color:#928374;">#  While you might set `base-url` to some external address (like
</span><span style="font-style:italic;color:#928374;">#  mydocs.myserver.com), the `internal-url` must be set such that
</span><span style="font-style:italic;color:#928374;">#  other nodes can reach this server.
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_INTERNAL__URL</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;http://localhost:7880&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  This is a hard limit to restrict the size of a batch that is
</span><span style="font-style:italic;color:#928374;">#  returned when searching for items. The user can set this limit
</span><span style="font-style:italic;color:#928374;">#  within the client config, but it is restricted by the server to
</span><span style="font-style:italic;color:#928374;">#  the number defined here. An admin might choose a lower number
</span><span style="font-style:italic;color:#928374;">#  depending on the available resources.
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_MAX__ITEM__PAGE__SIZE</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">200
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The number of characters to return for each item notes when
</span><span style="font-style:italic;color:#928374;">#  searching. Item notes may be very long, when returning them with
</span><span style="font-style:italic;color:#928374;">#  all the results from a search, they add quite some data to return.
</span><span style="font-style:italic;color:#928374;">#  In order to keep this low, a limit can be defined here.
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_MAX__NOTE__LENGTH</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">180
</span><span>
</span><span style="font-style:italic;color:#928374;">#  This defines whether the classification form in the collective
</span><span style="font-style:italic;color:#928374;">#  settings is displayed or not. If all joex instances have document
</span><span style="font-style:italic;color:#928374;">#  classification disabled, it makes sense to hide its settings from
</span><span style="font-style:italic;color:#928374;">#  users.
</span><span style="color:#fdf4c1;">DOCSPELL_SERVER_SHOW__CLASSIFICATION__SETTINGS</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">true
</span><span>
</span><span style="font-style:italic;color:#928374;">#### JOEX Configuration ####
</span><span>
</span><span style="font-style:italic;color:#928374;">#  This is the id of this node. If you run more than one server, you
</span><span style="font-style:italic;color:#928374;">#  have to make sure to provide unique ids per node.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_APP__ID</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;joex1&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  This is the base URL this application is deployed to. This is used
</span><span style="font-style:italic;color:#928374;">#  to register this joex instance such that docspell rest servers can
</span><span style="font-style:italic;color:#928374;">#  reach them
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_BASE__URL</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;http://localhost:7878&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_BIND_ADDRESS</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;localhost&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_BIND_PORT</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">7878
</span><span>
</span><span style="font-style:italic;color:#928374;">#  Defines the chunk size (in bytes) used to store the files.
</span><span style="font-style:italic;color:#928374;">#  This will affect the memory footprint when uploading and
</span><span style="font-style:italic;color:#928374;">#  downloading files. At most this amount is loaded into RAM for
</span><span style="font-style:italic;color:#928374;">#  down- and uploading.
</span><span style="font-style:italic;color:#928374;"># 
</span><span style="font-style:italic;color:#928374;">#  It also defines the chunk size used for the blobs inside the
</span><span style="font-style:italic;color:#928374;">#  database.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_CONVERT_CHUNK__SIZE</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">524288
</span><span>
</span><span style="font-style:italic;color:#928374;">#  A string used to change the filename of the converted pdf file.
</span><span style="font-style:italic;color:#928374;">#  If empty, the original file name is used for the pdf file ( the
</span><span style="font-style:italic;color:#928374;">#  extension is always replaced with `pdf`).
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_CONVERT_CONVERTED__FILENAME__PART</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;converted&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_CONVERT_DECRYPT__PDF_ENABLED</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">true
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The CSS that is used to style the resulting HTML.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_CONVERT_MARKDOWN_INTERNAL__CSS</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;\n        body { padding: 2em 5em; }\n      &quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  Images greater than this size are skipped. Note that every
</span><span style="font-style:italic;color:#928374;">#  image is loaded completely into memory for doing OCR. This is
</span><span style="font-style:italic;color:#928374;">#  the pixel count, `height * width` of the image.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_CONVERT_MAX__IMAGE__SIZE</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">14000000
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_CONVERT_OCRMYPDF_COMMAND_PROGRAM</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;ocrmypdf&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_CONVERT_OCRMYPDF_COMMAND_TIMEOUT</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;5 minutes&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_CONVERT_OCRMYPDF_ENABLED</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">true
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_CONVERT_OCRMYPDF_WORKING__DIR</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;/tmp/docspell-convert&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_CONVERT_TESSERACT_COMMAND_PROGRAM</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;tesseract&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_CONVERT_TESSERACT_COMMAND_TIMEOUT</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;5 minutes&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_CONVERT_TESSERACT_WORKING__DIR</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;/tmp/docspell-convert&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_CONVERT_UNOCONV_COMMAND_PROGRAM</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;unoconv&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_CONVERT_UNOCONV_COMMAND_TIMEOUT</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;2 minutes&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_CONVERT_UNOCONV_WORKING__DIR</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;/tmp/docspell-convert&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_CONVERT_WKHTMLPDF_COMMAND_PROGRAM</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;wkhtmltopdf&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_CONVERT_WKHTMLPDF_COMMAND_TIMEOUT</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;2 minutes&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_CONVERT_WKHTMLPDF_WORKING__DIR</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;/tmp/docspell-convert&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_EXTRACTION_OCR_GHOSTSCRIPT_COMMAND_PROGRAM</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;gs&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_EXTRACTION_OCR_GHOSTSCRIPT_COMMAND_TIMEOUT</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;5 minutes&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_EXTRACTION_OCR_GHOSTSCRIPT_WORKING__DIR</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;/tmp/docspell-extraction&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  Images greater than this size are skipped. Note that every
</span><span style="font-style:italic;color:#928374;">#  image is loaded completely into memory for doing OCR. This is
</span><span style="font-style:italic;color:#928374;">#  the pixel count, `height * width` of the image.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_EXTRACTION_OCR_MAX__IMAGE__SIZE</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">14000000
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_EXTRACTION_OCR_PAGE__RANGE_BEGIN</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">10
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_EXTRACTION_OCR_TESSERACT_COMMAND_PROGRAM</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;tesseract&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_EXTRACTION_OCR_TESSERACT_COMMAND_TIMEOUT</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;5 minutes&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_EXTRACTION_OCR_UNPAPER_COMMAND_PROGRAM</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;unpaper&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_EXTRACTION_OCR_UNPAPER_COMMAND_TIMEOUT</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;5 minutes&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_EXTRACTION_PDF_MIN__TEXT__LEN</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">500
</span><span>
</span><span style="font-style:italic;color:#928374;">#  When rendering a pdf page, use this dpi. This results in
</span><span style="font-style:italic;color:#928374;">#  scaling the image. A standard A4 page rendered at 96dpi
</span><span style="font-style:italic;color:#928374;">#  results in roughly 790x1100px image. Using 32 results in
</span><span style="font-style:italic;color:#928374;">#  roughly 200x300px image.
</span><span style="font-style:italic;color:#928374;"># 
</span><span style="font-style:italic;color:#928374;">#  Note, when this is changed, you might want to re-generate
</span><span style="font-style:italic;color:#928374;">#  preview images. Check the api for this, there is an endpoint
</span><span style="font-style:italic;color:#928374;">#  to regenerate all for a collective.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_EXTRACTION_PREVIEW_DPI</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">32
</span><span>
</span><span style="font-style:italic;color:#928374;">#  Defines the chunk size (in bytes) used to store the files.
</span><span style="font-style:italic;color:#928374;">#  This will affect the memory footprint when uploading and
</span><span style="font-style:italic;color:#928374;">#  downloading files. At most this amount is loaded into RAM for
</span><span style="font-style:italic;color:#928374;">#  down- and uploading.
</span><span style="font-style:italic;color:#928374;"># 
</span><span style="font-style:italic;color:#928374;">#  It also defines the chunk size used for the blobs inside the
</span><span style="font-style:italic;color:#928374;">#  database.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_FILES_CHUNK__SIZE</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">524288
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The full-text search feature can be disabled. It requires an
</span><span style="font-style:italic;color:#928374;">#  additional index server which needs additional memory and disk
</span><span style="font-style:italic;color:#928374;">#  space. It can be enabled later any time.
</span><span style="font-style:italic;color:#928374;"># 
</span><span style="font-style:italic;color:#928374;">#  Currently the SOLR search platform is supported.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_FULL__TEXT__SEARCH_ENABLED</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">false
</span><span>
</span><span style="font-style:italic;color:#928374;">#  Chunk size to use when indexing data from the database. This
</span><span style="font-style:italic;color:#928374;">#  many attachments are loaded into memory and pushed to the
</span><span style="font-style:italic;color:#928374;">#  full-text index.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_FULL__TEXT__SEARCH_MIGRATION_INDEX__ALL__CHUNK</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">10
</span><span>
</span><span style="font-style:italic;color:#928374;">#  Used to tell solr when to commit the data
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_FULL__TEXT__SEARCH_SOLR_COMMIT__WITHIN</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">1000
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The defType parameter to lucene that defines the parser to
</span><span style="font-style:italic;color:#928374;">#  use. You might want to try &quot;edismax&quot; or look here:
</span><span style="font-style:italic;color:#928374;">#  https://solr.apache.org/guide/8_4/query-syntax-and-parsing.html#query-syntax-and-parsing
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_FULL__TEXT__SEARCH_SOLR_DEF__TYPE</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;lucene&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  If true, logs request and response bodies
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_FULL__TEXT__SEARCH_SOLR_LOG__VERBOSE</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">false
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The default combiner for tokens. One of {AND, OR}.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_FULL__TEXT__SEARCH_SOLR_Q__OP</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;OR&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The URL to solr
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_FULL__TEXT__SEARCH_SOLR_URL</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;http://localhost:8983/solr/docspell&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  Whether this task is enabled
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_HOUSE__KEEPING_CHECK__NODES_ENABLED</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">true
</span><span>
</span><span style="font-style:italic;color:#928374;">#  How often the node must be unreachable, before it is removed.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_HOUSE__KEEPING_CHECK__NODES_MIN__NOT__FOUND</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">2
</span><span>
</span><span style="font-style:italic;color:#928374;">#  Whether this task is enabled.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_HOUSE__KEEPING_CLEANUP__INVITES_ENABLED</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">true
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The minimum age of invites to be deleted.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_HOUSE__KEEPING_CLEANUP__INVITES_OLDER__THAN</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;30 days&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  This defines how many jobs are deleted in one transaction.
</span><span style="font-style:italic;color:#928374;">#  Since the data to delete may get large, it can be configured
</span><span style="font-style:italic;color:#928374;">#  whether more or less memory should be used.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_HOUSE__KEEPING_CLEANUP__JOBS_DELETE__BATCH</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;100&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  Whether this task is enabled.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_HOUSE__KEEPING_CLEANUP__JOBS_ENABLED</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">true
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The minimum age of jobs to delete. It is matched against the
</span><span style="font-style:italic;color:#928374;">#  `finished&#39; timestamp.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_HOUSE__KEEPING_CLEANUP__JOBS_OLDER__THAN</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;30 days&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  Whether the job is enabled.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_HOUSE__KEEPING_CLEANUP__REMEMBER__ME_ENABLED</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">true
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The minimum age of tokens to be deleted.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_HOUSE__KEEPING_CLEANUP__REMEMBER__ME_OLDER__THAN</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;30 days&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  When the house keeping tasks execute. Default is to run every
</span><span style="font-style:italic;color:#928374;">#  week.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_HOUSE__KEEPING_SCHEDULE</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;Sun *-*-* 00:00:00&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The database password.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_JDBC_PASSWORD</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_JDBC_URL</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;jdbc:h2:///tmp/docspell-demo.db;MODE=PostgreSQL;DATABASE_TO_LOWER=TRUE;AUTO_SERVER=TRUE&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The database user.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_JDBC_USER</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;sa&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  Enable or disable debugging for e-mail related functionality. This
</span><span style="font-style:italic;color:#928374;">#  applies to both sending and receiving mails. For security reasons
</span><span style="font-style:italic;color:#928374;">#  logging is not very extensive on authentication failures. Setting
</span><span style="font-style:italic;color:#928374;">#  this to true, results in a lot of data printed to stdout.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_MAIL__DEBUG</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">false
</span><span>
</span><span style="font-style:italic;color:#928374;">#  This is the id of this node. If you run more than one server, you
</span><span style="font-style:italic;color:#928374;">#  have to make sure to provide unique ids per node.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_PERIODIC__SCHEDULER_NAME</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;joex1&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  A fallback to start looking for due periodic tasks regularily.
</span><span style="font-style:italic;color:#928374;">#  Usually joex instances should be notified via REST calls if
</span><span style="font-style:italic;color:#928374;">#  external processes change tasks. But these requests may get
</span><span style="font-style:italic;color:#928374;">#  lost.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_PERIODIC__SCHEDULER_WAKEUP__PERIOD</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;10 minutes&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  A counting scheme determines the ratio of how high- and low-prio
</span><span style="font-style:italic;color:#928374;">#  jobs are run. For example: 4,1 means run 4 high prio jobs, then
</span><span style="font-style:italic;color:#928374;">#  1 low prio and then start over.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_SCHEDULER_COUNTING__SCHEME</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;4,1&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The queue size of log statements from a job.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_SCHEDULER_LOG__BUFFER__SIZE</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">500
</span><span>
</span><span style="font-style:italic;color:#928374;">#  This is the id of this node. If you run more than one server, you
</span><span style="font-style:italic;color:#928374;">#  have to make sure to provide unique ids per node.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_SCHEDULER_NAME</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;joex1&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  Number of processing allowed in parallel.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_SCHEDULER_POOL__SIZE</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">1
</span><span>
</span><span style="font-style:italic;color:#928374;">#  How often a failed job should be retried until it enters failed
</span><span style="font-style:italic;color:#928374;">#  state. If a job fails, it becomes &quot;stuck&quot; and will be retried
</span><span style="font-style:italic;color:#928374;">#  after a delay.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_SCHEDULER_RETRIES</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">2
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The delay until the next try is performed for a failed job. This
</span><span style="font-style:italic;color:#928374;">#  delay is increased exponentially with the number of retries.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_SCHEDULER_RETRY__DELAY</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;1 minute&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  If no job is left in the queue, the scheduler will wait until a
</span><span style="font-style:italic;color:#928374;">#  notify is requested (using the REST interface). To also retry
</span><span style="font-style:italic;color:#928374;">#  stuck jobs, it will notify itself periodically.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_SCHEDULER_WAKEUP__PERIOD</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;30 minutes&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  This is used as the List-Id e-mail header when mails are sent
</span><span style="font-style:italic;color:#928374;">#  from docspell to its users (example: for notification mails). It
</span><span style="font-style:italic;color:#928374;">#  is not used when sending to external recipients. If it is empty,
</span><span style="font-style:italic;color:#928374;">#  no such header is added. Using this header is often useful when
</span><span style="font-style:italic;color:#928374;">#  filtering mails.
</span><span style="font-style:italic;color:#928374;"># 
</span><span style="font-style:italic;color:#928374;">#  It should be a string in angle brackets. See
</span><span style="font-style:italic;color:#928374;">#  https://tools.ietf.org/html/rfc2919 for a formal specification
</span><span style="font-style:italic;color:#928374;">#  of this header.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_SEND__MAIL_LIST__ID</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  Whether to enable classification globally. Each collective can
</span><span style="font-style:italic;color:#928374;">#  enable/disable auto-tagging. The classifier is also used for
</span><span style="font-style:italic;color:#928374;">#  finding correspondents and concerned entities, if enabled
</span><span style="font-style:italic;color:#928374;">#  here.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_TEXT__ANALYSIS_CLASSIFICATION_ENABLED</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">true
</span><span>
</span><span style="font-style:italic;color:#928374;">#  If concerned with memory consumption, this restricts the
</span><span style="font-style:italic;color:#928374;">#  number of items to consider. More are better for training. A
</span><span style="font-style:italic;color:#928374;">#  negative value or zero means to train on all items.
</span><span style="font-style:italic;color:#928374;"># 
</span><span style="font-style:italic;color:#928374;">#  This limit and `text-analysis.max-length` define how much
</span><span style="font-style:italic;color:#928374;">#  memory is required. On weaker hardware, it is advised to play
</span><span style="font-style:italic;color:#928374;">#  with these values.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_TEXT__ANALYSIS_CLASSIFICATION_ITEM__COUNT</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">600
</span><span>
</span><span style="font-style:italic;color:#928374;">#  Maximum length of text to be analysed.
</span><span style="font-style:italic;color:#928374;"># 
</span><span style="font-style:italic;color:#928374;">#  All text to analyse must fit into RAM. A large document may take
</span><span style="font-style:italic;color:#928374;">#  too much heap. Also, most important information is at the
</span><span style="font-style:italic;color:#928374;">#  beginning of a document, so in most cases the first two pages
</span><span style="font-style:italic;color:#928374;">#  should suffice. Default is 5000, which are about 2 pages (just a
</span><span style="font-style:italic;color:#928374;">#  rough guess, of course). For my data, more than 80% of the
</span><span style="font-style:italic;color:#928374;">#  documents are less than 5000 characters.
</span><span style="font-style:italic;color:#928374;"># 
</span><span style="font-style:italic;color:#928374;">#  This values applies to nlp and the classifier. If this value is
</span><span style="font-style:italic;color:#928374;">#  &lt;= 0, the limit is disabled.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_TEXT__ANALYSIS_MAX__LENGTH</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">5000
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The StanfordCoreNLP library caches language models which
</span><span style="font-style:italic;color:#928374;">#  requires quite some amount of memory. Setting this interval to a
</span><span style="font-style:italic;color:#928374;">#  positive duration, the cache is cleared after this amount of
</span><span style="font-style:italic;color:#928374;">#  idle time. Set it to 0 to disable it if you have enough memory,
</span><span style="font-style:italic;color:#928374;">#  processing will be faster.
</span><span style="font-style:italic;color:#928374;"># 
</span><span style="font-style:italic;color:#928374;">#  This has only any effect, if mode != disabled.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_TEXT__ANALYSIS_NLP_CLEAR__INTERVAL</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;15 minutes&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  Restricts proposals for due dates. Only dates earlier than this
</span><span style="font-style:italic;color:#928374;">#  number of years in the future are considered.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_TEXT__ANALYSIS_NLP_MAX__DUE__DATE__YEARS</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">10
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The mode for configuring NLP models:
</span><span style="font-style:italic;color:#928374;"># 
</span><span style="font-style:italic;color:#928374;">#  1. full – builds the complete pipeline
</span><span style="font-style:italic;color:#928374;">#  2. basic - builds only the ner annotator
</span><span style="font-style:italic;color:#928374;">#  3. regexonly - matches each entry in your address book via regexps
</span><span style="font-style:italic;color:#928374;">#  4. disabled - doesn&#39;t use any stanford-nlp feature
</span><span style="font-style:italic;color:#928374;"># 
</span><span style="font-style:italic;color:#928374;">#  The full and basic variants rely on pre-build language models
</span><span style="font-style:italic;color:#928374;">#  that are available for only a few languages. Memory usage
</span><span style="font-style:italic;color:#928374;">#  varies among the languages. So joex should run with -Xmx1400M
</span><span style="font-style:italic;color:#928374;">#  at least when using mode=full.
</span><span style="font-style:italic;color:#928374;"># 
</span><span style="font-style:italic;color:#928374;">#  The basic variant does a quite good job for German and
</span><span style="font-style:italic;color:#928374;">#  English. It might be worse for French, always depending on the
</span><span style="font-style:italic;color:#928374;">#  type of text that is analysed. Joex should run with about 500M
</span><span style="font-style:italic;color:#928374;">#  heap, here again lanugage German uses the most.
</span><span style="font-style:italic;color:#928374;"># 
</span><span style="font-style:italic;color:#928374;">#  The regexonly variant doesn&#39;t depend on a language. It roughly
</span><span style="font-style:italic;color:#928374;">#  works by converting all entries in your addressbook into
</span><span style="font-style:italic;color:#928374;">#  regexps and matches each one against the text. This can get
</span><span style="font-style:italic;color:#928374;">#  memory intensive, too, when the addressbook grows large. This
</span><span style="font-style:italic;color:#928374;">#  is included in the full and basic by default, but can be used
</span><span style="font-style:italic;color:#928374;">#  independently by setting mode=regexner.
</span><span style="font-style:italic;color:#928374;"># 
</span><span style="font-style:italic;color:#928374;">#  When mode=disabled, then the whole nlp pipeline is disabled,
</span><span style="font-style:italic;color:#928374;">#  and you won&#39;t get any suggestions. Only what the classifier
</span><span style="font-style:italic;color:#928374;">#  returns (if enabled).
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_TEXT__ANALYSIS_NLP_MODE</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;full&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The NER annotation uses a file of patterns that is derived
</span><span style="font-style:italic;color:#928374;">#  from a collective&#39;s address book. This is is the time how
</span><span style="font-style:italic;color:#928374;">#  long this data will be kept until a check for a state change
</span><span style="font-style:italic;color:#928374;">#  is done.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_TEXT__ANALYSIS_NLP_REGEX__NER_FILE__CACHE__TIME</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;1 minute&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  Whether to enable custom NER annotation. This uses the
</span><span style="font-style:italic;color:#928374;">#  address book of a collective as input for NER tagging (to
</span><span style="font-style:italic;color:#928374;">#  automatically find correspondent and concerned entities). If
</span><span style="font-style:italic;color:#928374;">#  the address book is large, this can be quite memory
</span><span style="font-style:italic;color:#928374;">#  intensive and also makes text analysis much slower. But it
</span><span style="font-style:italic;color:#928374;">#  improves accuracy and can be used independent of the
</span><span style="font-style:italic;color:#928374;">#  lanugage. If this is set to 0, it is effectively disabled
</span><span style="font-style:italic;color:#928374;">#  and NER tagging uses only statistical models (that also work
</span><span style="font-style:italic;color:#928374;">#  quite well, but are restricted to the languages mentioned
</span><span style="font-style:italic;color:#928374;">#  above).
</span><span style="font-style:italic;color:#928374;"># 
</span><span style="font-style:italic;color:#928374;">#  Note, this is only relevant if nlp-config.mode is not
</span><span style="font-style:italic;color:#928374;">#  &quot;disabled&quot;.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_TEXT__ANALYSIS_NLP_REGEX__NER_MAX__ENTRIES</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">1000
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_TEXT__ANALYSIS_WORKING__DIR</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;/tmp/docspell-analysis&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The body of the mail. Subject and body can contain these
</span><span style="font-style:italic;color:#928374;">#  variables which are replaced:
</span><span style="font-style:italic;color:#928374;"># 
</span><span style="font-style:italic;color:#928374;">#  - `latestVersion` the latest available version of Docspell
</span><span style="font-style:italic;color:#928374;">#  - `currentVersion` the currently running (old) version of Docspell
</span><span style="font-style:italic;color:#928374;">#  - `releasedAt` a date when the release was published
</span><span style="font-style:italic;color:#928374;"># 
</span><span style="font-style:italic;color:#928374;">#  The body is processed as markdown after the variables have been
</span><span style="font-style:italic;color:#928374;">#  replaced.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_UPDATE__CHECK_BODY</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;\nHello,\n\nYou are currently running Docspell {{ currentVersion }}. Version *{{ latestVersion }}*\nis now available, which was released on {{ releasedAt }}. Check the release page at:\n\n&lt;https://github.com/eikek/docspell/releases/latest&gt;\n\nHave a nice day!\n\nDocpell Update Check\n&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  Whether to enable this task
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_UPDATE__CHECK_ENABLED</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">false
</span><span>
</span><span style="font-style:italic;color:#928374;">#  When the update check should execute. Default is to run every
</span><span style="font-style:italic;color:#928374;">#  week.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_UPDATE__CHECK_SCHEDULE</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;Sun *-*-* 00:00:00&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  An account id in form of `collective/user` (or just `user` if
</span><span style="font-style:italic;color:#928374;">#  collective and user name are the same). This user account must
</span><span style="font-style:italic;color:#928374;">#  have at least one valid SMTP settings which are used to send the
</span><span style="font-style:italic;color:#928374;">#  mail.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_UPDATE__CHECK_SENDER__ACCOUNT</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The SMTP connection id that should be used for sending the mail.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_UPDATE__CHECK_SMTP__ID</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  The subject of the mail. It supports the same variables as the
</span><span style="font-style:italic;color:#928374;">#  body.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_UPDATE__CHECK_SUBJECT</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;Docspell {{ latestVersion }} is available&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">#  Sends the mail without checking the latest release. Can be used
</span><span style="font-style:italic;color:#928374;">#  if you want to see if mail sending works, but don&#39;t want to wait
</span><span style="font-style:italic;color:#928374;">#  until a new release is published.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_UPDATE__CHECK_TEST__RUN</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">false
</span><span>
</span><span style="font-style:italic;color:#928374;">#  How many mails (headers only) to retrieve in one chunk.
</span><span style="font-style:italic;color:#928374;"># 
</span><span style="font-style:italic;color:#928374;">#  If this is greater than `max-mails&#39; it is set automatically to
</span><span style="font-style:italic;color:#928374;">#  the value of `max-mails&#39;.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_USER__TASKS_SCAN__MAILBOX_MAIL__CHUNK__SIZE</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">50
</span><span>
</span><span style="font-style:italic;color:#928374;">#  A limit of how many folders to scan through. If a user
</span><span style="font-style:italic;color:#928374;">#  configures more than this, only upto this limit folders are
</span><span style="font-style:italic;color:#928374;">#  scanned and a warning is logged.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_USER__TASKS_SCAN__MAILBOX_MAX__FOLDERS</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">50
</span><span>
</span><span style="font-style:italic;color:#928374;">#  A limit on how many mails to process in one job run. This is
</span><span style="font-style:italic;color:#928374;">#  meant to avoid too heavy resource allocation to one
</span><span style="font-style:italic;color:#928374;">#  user/collective.
</span><span style="font-style:italic;color:#928374;"># 
</span><span style="font-style:italic;color:#928374;">#  If more than this number of mails is encountered, a warning is
</span><span style="font-style:italic;color:#928374;">#  logged.
</span><span style="color:#fdf4c1;">DOCSPELL_JOEX_USER__TASKS_SCAN__MAILBOX_MAX__MAILS</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">500
</span></code></pre>

                        </div>
                    </div>
                </div>
            </div>
        </section>
        

        
        <footer class="footer">
    <div class="container">
        <div class="content has-text-centered">
            <span>
                Docspell 0.29.0
            </span>
            <span class="ml-1 mr-1">•</span>
            <a href="https://spdx.org/licenses/AGPL-3.0-or-later.html" target="_blank">AGPLv3+</a>
            <span class="ml-1 mr-1">•</span>
            <a href="https://github.com/eikek/docspell" target="_blank">
                Source Code
            </a>
            <span class="ml-1 mr-1">•</span>
            <span>
                Chat on <a href="https://gitter.im/eikek/docspell">Gitter</a>/<a href="https://app.element.io/#/room/#eikek_docspell:gitter.im">Matrix</a>
            </span>
        </div>
    </div>
    
</footer>

        <script>
 var initSearch = function() {
     var elmSearch = Elm.Search.init({
         node: document.getElementById("search"),
         flags: {}
     });
     initElmSearch(elmSearch);
 }
 if (document.readyState === "complete" ||
     (document.readyState !== "loading" && !document.documentElement.doScroll)
 ) {
     initSearch();
 } else {
     document.addEventListener("DOMContentLoaded", initSearch);
 }
</script>

        <!-- Fathom - simple website analytics - https://github.com/usefathom/fathom -->
<script>
 (function(f, a, t, h, o, m){
     a[h]=a[h]||function(){
         (a[h].q=a[h].q||[]).push(arguments)
     };
     o=f.createElement('script'),
     m=f.getElementsByTagName('script')[0];
     o.async=1; o.src=t; o.id='fathom-script';
     m.parentNode.insertBefore(o,m)
 })(document, window, '//webstats.daheim.site/tracker.js', 'fathom');
 fathom('set', 'siteId', 'OGJDF');
 fathom('trackPageview');
</script>
<!-- / Fathom -->

    </body>
</html>

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="Eike Kettner">
<meta name="description" content="Docspell is a Document Management System (DMS), a system that asists in organizing your piles of documents, resulting from scanners, e-mails and other sources with miminal effort.">
<meta name="keywords" content="document management system dms organizer ocr open source free scan pdf word doc archive gpl machine learning nlp auto tagging"/>
<meta name="robots" content="index,follow"/>
<meta name="image" property="og:image" content="/img/poster.png">
<meta name="title" property="og:title" content="Docspell â€“ Simple Document Organizer">
<meta name="og:image" content="/img/poster.png">
<meta name="og:title" content="Docspell â€“ Simple Document Organizer">
<meta name="og:site_name" content="Nix &#x2F; NixOS - Docspell">
<meta name="og:url" content="">
<meta name="og:type" content="website">
<meta name="og:description" content="Simple Document Organizer">
<meta name="twitter:title" content="Docspell">
<meta name="twitter:image" content="/img/poster.png">
<meta name="twitter:description" content="Simple Document Organizer">
<meta name="twitter:card" content="summary_large_image">

<link rel="shortcut icon" href="/favicon-mc.ico" type="image/x-icon">
<link rel="icon" href="/favicon-mc.ico" type="image/x-icon">

        <title>Nix &#x2F; NixOS â€“ Docspell Documentation</title>
        <link rel="stylesheet" href="/styles.css">
    </head>
    <body>
        <section class="hero is-info is-small">
            <div class="hero-head">
                <nav class="navbar">
    <div class="navbar-brand">
        <a class="navbar-item" href="/">
            <span class="icon">
                <img src="/icons/logo-only-36.svg">
            </span>
            <span>
                Docspell
            </span>
        </a>
    </div>
    <div class="navbar-start">
        <a target="_blank"
           href="https://github.com/eikek/docspell"
           class="navbar-item">
            <span class="icon">
                <img src="/icons/github-40.svg">
            </span>
            <span>
                Github
            </span>
        </a>
    </div>
</nav>

            </div>
            <div class="hero-body">
                <div class="columns is-vcentered">
                    <div class="column is-8">
                        <h1 class="title">
                            Nix &#x2F; NixOS
                        </h1>
                        <h2 class="subtitle">
                            Docspell Documentation
                        </h2>
                    </div>
                    <div class="column">
                        <id id="search"></id>
                    </div>
                </div>
            </div>
        </section>
        <nav class="breadcrumb has-succeeds-separator" aria-label="breadcrumbs"
             style="position:sticky; top: 0; z-index:10;">
            <ul>
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;"></a>
                </li>
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;">Overview</a>
                </li>
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;install&#x2F;">Installation and Deployment</a>
                </li>
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;install&#x2F;nix&#x2F;">Nix &#x2F; NixOS</a>
                </li>
            </ul>
        </nav>

        <section class="section pt-2">
            <div class="columns is-desktop">
                <div class="column is-3">
                    <div class="menu"
                         style="position:sticky; top:2rem; z-index:10;">
                        <ul class="menu-list">
                            
                            

                            <p class="menu-label">
                                Installation and Deployment
                            </p>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/install/quickstart/"
                                   >
                                    Quickstart
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/install/prereq/"
                                   >
                                    Prerequisites
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/install/docker/"
                                   >
                                    Docker
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/install/download-run/"
                                   >
                                    Download &amp; Run
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/install/nix/"
                                   class="is-active">
                                    Nix &#x2F; Nixos
                                </a>
                                
                                <ul class="menu-list">
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;install&#x2F;nix&#x2F;#install-via-nix">
                                            Install via Nix
                                        </a>
                                        <ul>
                                            
                                        </ul>
                                    </li>
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;install&#x2F;nix&#x2F;#upgrading">
                                            Upgrading
                                        </a>
                                        <ul>
                                            
                                        </ul>
                                    </li>
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;install&#x2F;nix&#x2F;#nixos">
                                            Docspell on NixOS
                                        </a>
                                        <ul>
                                            
                                            <li>
                                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;install&#x2F;nix&#x2F;#nixos-example">
                                                    NixOS Example
                                                </a>
                                            </li>
                                            
                                        </ul>
                                    </li>
                                    
                                </ul>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/install/downgrading/"
                                   >
                                    Downgrading
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/install/rpi/"
                                   >
                                    Raspberry-Pi And Similiar
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/install/reverseproxy/"
                                   >
                                    Reverse Proxy
                                </a>
                                
                            </li>
                            
                        </ul>
                    </div>
                </div>

                <div class="column is-9">
                    <div class="container">
                        <div class="content doc">
                            <h2 id="install-via-nix">Install via Nix<a class="zola-anchor" href="#install-via-nix" aria-label="Anchor link for: install-via-nix">ðŸ”—</a></h2>
<p>Docspell can be installed via the <a href="https://nixos.org/nix">nix</a> package
manager, which is available for Linux and OSX. Docspell is currently not
part of the <a href="https://nixos.org/nixpkgs/">nixpkgs collection</a>, but you
can use the derivation from this repository. This is sometimes
referred to as <a href="https://nixos.wiki/wiki/Import_From_Derivation">import from
derivation</a>.</p>
<p>For example, the <code>builtins.fetchTarball</code> function can be used to
retrieve the files; then import the <code>release.nix</code> file:</p>
<pre data-lang="nix" style="background-color:#282828;color:#fdf4c1aa;" class="language-nix "><code class="language-nix" data-lang="nix"><span style="color:#fa5c4b;">let
</span><span>  </span><span style="color:#8ec07c;">docspellsrc </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">builtins</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">fetchTarball </span><span style="color:#b8bb26;">&quot;https://github.com/eikek/docspell/archive/master.tar.gz&quot;</span><span>;
</span><span style="color:#fa5c4b;">in
</span><span style="color:#fabd2f;">import </span><span style="color:#b8bb26;">&quot;</span><span style="font-style:italic;color:#b8bb26;">${</span><span style="color:#fdf4c1;">docspellsrc</span><span style="font-style:italic;color:#b8bb26;">}</span><span style="color:#b8bb26;">/nix/release.nix&quot;</span><span style="background-color:#932b1e;color:#fdf4c1;">;</span><span>
</span></code></pre>
<p>This creates a set containing a function for creating a derivation for
docspell. This then needs to be called like other custom packages. For
example, in your <code>~/.nixpkgs/config.nix</code> you could write this:</p>
<pre data-lang="nix" style="background-color:#282828;color:#fdf4c1aa;" class="language-nix "><code class="language-nix" data-lang="nix"><span style="color:#fa5c4b;">let
</span><span>  </span><span style="color:#8ec07c;">docspellsrc </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">builtins</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">fetchTarball </span><span style="color:#b8bb26;">&quot;https://github.com/eikek/docspell/archive/master.tar.gz&quot;</span><span>;
</span><span>  </span><span style="color:#8ec07c;">docspell </span><span style="color:#fe8019;">= </span><span style="color:#fabd2f;">import </span><span style="color:#b8bb26;">&quot;</span><span style="font-style:italic;color:#b8bb26;">${</span><span style="color:#fdf4c1;">docspellsrc</span><span style="font-style:italic;color:#b8bb26;">}</span><span style="color:#b8bb26;">/nix/release.nix&quot;</span><span>;
</span><span style="color:#fa5c4b;">in
</span><span>{ </span><span style="color:#8ec07c;">packageOverrides </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1;">pkgs</span><span>:
</span><span>   </span><span style="color:#fa5c4b;">let
</span><span>     </span><span style="color:#8ec07c;">callPackage </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1;">pkgs</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">lib</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">callPackageWith</span><span>(</span><span style="color:#fdf4c1;">custom </span><span style="color:#fe8019;">// </span><span style="color:#fdf4c1;">pkgs</span><span>);
</span><span>     </span><span style="color:#8ec07c;">custom </span><span style="color:#fe8019;">= </span><span>{
</span><span>       </span><span style="color:#8ec07c;">docspell </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1;">callPackage docspell</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">currentPkg </span><span>{};
</span><span>     };
</span><span>   </span><span style="color:#fa5c4b;">in </span><span style="color:#fdf4c1;">custom</span><span>;
</span><span>}
</span></code></pre>
<p>The <code>docspell</code> custom package is again a set that contains derivations
for all 3 installable docspell programs: the restserver, joex and the
tools.</p>
<p>Then you can install docspell via <code>nix-shell</code> or <code>nix-env</code>, for example:</p>
<pre data-lang="bash" style="background-color:#282828;color:#fdf4c1aa;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#fdf4c1;">$ nix-env -iA nixpkgs.docspell.server nixpkgs.docspell.joex nixpkgs.docspell.tools
</span></code></pre>
<p>You may need to replace <code>nixpkgs</code> with <code>nixos</code> when you're on NixOS.</p>
<p>The expression <code>docspell.currentPkg</code> refers to the most current
release of Docspell. So even if you use the tarball of the current
master branch, the <code>release.nix</code> file only contains derivations for
releases. The expression <code>docspell.currentPkg</code> is a shortcut for
selecting the most current release. For example it translates to
<code>docspell.pkg docspell.cfg.v&lt;pre data-shortcode&gt;0_31_0&lt;/pre&gt;</code> â€“ if the current version
is <code>&lt;pre data-shortcode&gt;0.31.0&lt;/pre&gt;</code>.</p>
<h2 id="upgrading">Upgrading<a class="zola-anchor" href="#upgrading" aria-label="Anchor link for: upgrading">ðŸ”—</a></h2>
<p>Since <a href="https://docspell.org/docs/install/downgrading/">downgrading</a> is not supported,
it is recommended to backup your database before upgrading. Should
something not work as expected, restore the database backup and go
back to the previous version.</p>
<p>When using the provided nix setup, the <code>currentPkg</code> always points to
the latest release. Thus it is enough to run <code>nix-build</code>.</p>
<h2 id="nixos">Docspell on NixOS<a class="zola-anchor" href="#nixos" aria-label="Anchor link for: nixos">ðŸ”—</a></h2>
<p>If you are running <a href="https://nixos.org">NixOS</a>, there is a module
definition for installing Docspell as a service using systemd.</p>
<p>There are the following modules provided:</p>
<ul>
<li>restserver</li>
<li>joex</li>
<li>consumedir</li>
</ul>
<p>The <code>consumedir</code> module defines a systemd unit that starts the <code>dsc watch</code> command to watch one or more directories for new files.</p>
<p>You need to import the <code>release.nix</code> file as described above in your
<code>configuration.nix</code> and then append the docspell module to your list of
modules. Here is an example:</p>
<pre data-lang="nix" style="background-color:#282828;color:#fdf4c1aa;" class="language-nix "><code class="language-nix" data-lang="nix"><span style="color:#d3869b;">{ </span><span style="color:#fdf4c1;">config</span><span style="color:#fe8019;">, </span><span style="color:#fdf4c1;">pkgs</span><span style="color:#fe8019;">, ... </span><span style="color:#d3869b;">}</span><span>:
</span><span style="color:#fa5c4b;">let
</span><span>  </span><span style="color:#8ec07c;">docspellsrc </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">builtins</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">fetchTarball </span><span style="color:#b8bb26;">&quot;https://github.com/eikek/docspell/archive/master.tar.gz&quot;</span><span>;
</span><span>  </span><span style="color:#8ec07c;">docspell </span><span style="color:#fe8019;">= </span><span style="color:#fabd2f;">import </span><span style="color:#b8bb26;">&quot;</span><span style="font-style:italic;color:#b8bb26;">${</span><span style="color:#fdf4c1;">docspellsrc</span><span style="font-style:italic;color:#b8bb26;">}</span><span style="color:#b8bb26;">/nix/release.nix&quot;</span><span>;
</span><span style="color:#fa5c4b;">in
</span><span>{
</span><span>  </span><span style="color:#8ec07c;">imports </span><span style="color:#fe8019;">= </span><span>[ </span><span style="color:#fdf4c1;">mymodule1 mymodule2 </span><span>] </span><span style="color:#fe8019;">++ </span><span style="color:#fdf4c1;">docspell</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">modules</span><span>;
</span><span>
</span><span>  </span><span style="color:#8ec07c;">nixpkgs </span><span style="color:#fe8019;">= </span><span>{
</span><span>    </span><span style="color:#8ec07c;">config </span><span style="color:#fe8019;">= </span><span>{
</span><span>      </span><span style="color:#8ec07c;">packageOverrides </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1;">pkgs</span><span>:
</span><span>        </span><span style="color:#fa5c4b;">let
</span><span>          </span><span style="color:#8ec07c;">callPackage </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1;">pkgs</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">lib</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">callPackageWith</span><span>(</span><span style="color:#fdf4c1;">custom </span><span style="color:#fe8019;">// </span><span style="color:#fdf4c1;">pkgs</span><span>);
</span><span>          </span><span style="color:#8ec07c;">custom </span><span style="color:#fe8019;">= </span><span>{
</span><span>            </span><span style="color:#8ec07c;">docspell </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1;">callPackage docspell</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">currentPkg </span><span>{};
</span><span>          };
</span><span>        </span><span style="color:#fa5c4b;">in </span><span style="color:#fdf4c1;">custom</span><span>;
</span><span>    };
</span><span>  };
</span><span>
</span><span>  </span><span style="color:#8ec07c;">services</span><span>.</span><span style="color:#8ec07c;">docspell-restserver </span><span style="color:#fe8019;">= </span><span>{
</span><span>    </span><span style="color:#8ec07c;">enable </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">true</span><span>;
</span><span>    </span><span style="color:#8ec07c;">base-url </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;http://docspelltest:7880&quot;</span><span>;
</span><span>    </span><span style="font-style:italic;color:#928374;"># ... more settings here
</span><span>  };
</span><span>  </span><span style="color:#8ec07c;">services</span><span>.</span><span style="color:#8ec07c;">docspell-joex </span><span style="color:#fe8019;">= </span><span>{
</span><span>    </span><span style="color:#8ec07c;">enable </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">true</span><span>;
</span><span>    </span><span style="color:#8ec07c;">base-url </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;http://docspelltexst:7878&quot;</span><span>;
</span><span>    </span><span style="font-style:italic;color:#928374;"># ... more settings here
</span><span>  };
</span><span>  </span><span style="color:#8ec07c;">services</span><span>.</span><span style="color:#8ec07c;">docspell-consumedir </span><span style="color:#fe8019;">= </span><span>{
</span><span>    </span><span style="color:#8ec07c;">enable </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">true</span><span>;
</span><span>    </span><span style="color:#8ec07c;">watchDirs </span><span style="color:#fe8019;">= </span><span>[</span><span style="color:#b8bb26;">&quot;/tmp/test&quot;</span><span>];
</span><span>    </span><span style="color:#8ec07c;">source-id </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;the-source-id&quot;</span><span>;
</span><span>  };
</span><span>
</span><span>  ...
</span><span>}
</span><span>
</span></code></pre>
<p>Please see the <code>nix/module-server.nix</code> and <code>nix/module-joex.nix</code> files
for the set of options. The nixos options are modelled after the
default configuration file.</p>
<p>The modules files are only applicable to the newest version of
Docspell. If you really need an older version, checkout the
appropriate commit.</p>
<h3 id="nixos-example">NixOS Example<a class="zola-anchor" href="#nixos-example" aria-label="Anchor link for: nixos-example">ðŸ”—</a></h3>
<p>This is a example system configuration that installs docspell with a
postgres database. This snippet can be used to create a vm (using
<code>nixos-rebuild build-vm</code> as shown above) or a container, for example.</p>
<pre data-lang="nix" style="background-color:#282828;color:#fdf4c1aa;" class="language-nix "><code class="language-nix" data-lang="nix"><span style="color:#d3869b;">{ </span><span style="color:#fdf4c1;">config</span><span style="color:#fe8019;">, </span><span style="color:#fdf4c1;">pkgs</span><span style="color:#fe8019;">, ... </span><span style="color:#d3869b;">}</span><span>:
</span><span style="color:#fa5c4b;">let
</span><span>  </span><span style="color:#8ec07c;">docspellsrc </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">builtins</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">fetchTarball </span><span style="color:#b8bb26;">&quot;https://github.com/eikek/docspell/archive/master.tar.gz&quot;</span><span>;
</span><span>  </span><span style="color:#8ec07c;">docspell </span><span style="color:#fe8019;">= </span><span style="color:#fabd2f;">import </span><span style="color:#b8bb26;">&quot;</span><span style="font-style:italic;color:#b8bb26;">${</span><span style="color:#fdf4c1;">docspellsrc</span><span style="font-style:italic;color:#b8bb26;">}</span><span style="color:#b8bb26;">/nix/release.nix&quot;</span><span>;
</span><span style="color:#fa5c4b;">in
</span><span>{
</span><span>  </span><span style="color:#8ec07c;">imports </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1;">docspell</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">modules</span><span>;
</span><span>
</span><span>  </span><span style="color:#8ec07c;">nixpkgs </span><span style="color:#fe8019;">= </span><span>{
</span><span>    </span><span style="color:#8ec07c;">config </span><span style="color:#fe8019;">= </span><span>{
</span><span>      </span><span style="color:#8ec07c;">packageOverrides </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1;">pkgs</span><span>:
</span><span>        </span><span style="color:#fa5c4b;">let
</span><span>          </span><span style="color:#8ec07c;">callPackage </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1;">pkgs</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">lib</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">callPackageWith</span><span>(</span><span style="color:#fdf4c1;">custom </span><span style="color:#fe8019;">// </span><span style="color:#fdf4c1;">pkgs</span><span>);
</span><span>          </span><span style="color:#8ec07c;">custom </span><span style="color:#fe8019;">= </span><span>{
</span><span>            </span><span style="color:#8ec07c;">docspell </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1;">callPackage docspell</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">currentPkg </span><span>{};
</span><span>          };
</span><span>        </span><span style="color:#fa5c4b;">in </span><span style="color:#fdf4c1;">custom</span><span>;
</span><span>    };
</span><span>  };
</span><span>
</span><span>  </span><span style="font-style:italic;color:#928374;">##### just for the exampleâ€¦
</span><span>  </span><span style="color:#8ec07c;">users</span><span>.</span><span style="color:#8ec07c;">users</span><span>.</span><span style="color:#8ec07c;">root </span><span style="color:#fe8019;">= </span><span>{
</span><span>    </span><span style="color:#8ec07c;">password </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;root&quot;</span><span>;
</span><span>  };
</span><span>  </span><span style="font-style:italic;color:#928374;">#####
</span><span>
</span><span>  </span><span style="font-style:italic;color:#928374;"># install docspell-joex and enable the systemd service
</span><span>  </span><span style="color:#8ec07c;">services</span><span>.</span><span style="color:#8ec07c;">docspell-joex </span><span style="color:#fe8019;">= </span><span>{
</span><span>    </span><span style="color:#8ec07c;">enable </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">true</span><span>;
</span><span>    </span><span style="color:#8ec07c;">base-url </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;http://localhost:7878&quot;</span><span>;
</span><span>    </span><span style="color:#8ec07c;">bind </span><span style="color:#fe8019;">= </span><span>{
</span><span>      </span><span style="color:#8ec07c;">address </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;0.0.0.0&quot;</span><span>;
</span><span>      </span><span style="color:#8ec07c;">port </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">7878</span><span>;
</span><span>    };
</span><span>    </span><span style="color:#8ec07c;">scheduler </span><span style="color:#fe8019;">= </span><span>{
</span><span>      </span><span style="color:#8ec07c;">pool-size </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">1</span><span>;
</span><span>    };
</span><span>    </span><span style="color:#8ec07c;">jdbc </span><span style="color:#fe8019;">= </span><span>{
</span><span>      </span><span style="color:#8ec07c;">url </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;jdbc:postgresql://localhost:5432/docspell&quot;</span><span>;
</span><span>      </span><span style="color:#8ec07c;">user </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;docspell&quot;</span><span>;
</span><span>      </span><span style="color:#8ec07c;">password </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;docspell&quot;</span><span>;
</span><span>    };
</span><span>  };
</span><span>
</span><span>  </span><span style="font-style:italic;color:#928374;"># install docspell-restserver and enable the systemd service
</span><span>  </span><span style="color:#8ec07c;">services</span><span>.</span><span style="color:#8ec07c;">docspell-restserver </span><span style="color:#fe8019;">= </span><span>{
</span><span>    </span><span style="color:#8ec07c;">enable </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">true</span><span>;
</span><span>    </span><span style="color:#8ec07c;">base-url </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;http://localhost:7880&quot;</span><span>;
</span><span>    </span><span style="color:#8ec07c;">bind </span><span style="color:#fe8019;">= </span><span>{
</span><span>      </span><span style="color:#8ec07c;">address </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;0.0.0.0&quot;</span><span>;
</span><span>      </span><span style="color:#8ec07c;">port </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">7880</span><span>;
</span><span>    };
</span><span>    </span><span style="color:#8ec07c;">auth </span><span style="color:#fe8019;">= </span><span>{
</span><span>      </span><span style="color:#8ec07c;">server-secret </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;b64:EirgaudMyNvWg4TvxVGxTu-fgtrto4ETz--Hk9Pv2o4=&quot;</span><span>;
</span><span>    };
</span><span>    </span><span style="color:#8ec07c;">backend </span><span style="color:#fe8019;">= </span><span>{
</span><span>      </span><span style="color:#8ec07c;">signup </span><span style="color:#fe8019;">= </span><span>{
</span><span>        </span><span style="color:#8ec07c;">mode </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;invite&quot;</span><span>;
</span><span>        </span><span style="color:#8ec07c;">new-invite-password </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;dsinvite2&quot;</span><span>;
</span><span>        </span><span style="color:#8ec07c;">invite-time </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;30 days&quot;</span><span>;
</span><span>      };
</span><span>      </span><span style="color:#8ec07c;">jdbc </span><span style="color:#fe8019;">= </span><span>{
</span><span>        </span><span style="color:#8ec07c;">url </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;jdbc:postgresql://localhost:5432/docspell&quot;</span><span>;
</span><span>        </span><span style="color:#8ec07c;">user </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;docspell&quot;</span><span>;
</span><span>        </span><span style="color:#8ec07c;">password </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;docspell&quot;</span><span>;
</span><span>      };
</span><span>    };
</span><span>  };
</span><span>
</span><span>  </span><span style="font-style:italic;color:#928374;"># install postgresql and initially create user/database
</span><span>  </span><span style="color:#8ec07c;">services</span><span>.</span><span style="color:#8ec07c;">postgresql </span><span style="color:#fe8019;">=
</span><span>  </span><span style="color:#fa5c4b;">let
</span><span>    </span><span style="color:#8ec07c;">pginit </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1;">pkgs</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">writeText </span><span style="color:#b8bb26;">&quot;pginit.sql&quot; &#39;&#39;
</span><span style="color:#b8bb26;">      CREATE USER docspell WITH PASSWORD &#39;docspell&#39; LOGIN CREATEDB;
</span><span style="color:#b8bb26;">      GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO docspell;
</span><span style="color:#b8bb26;">      GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA public TO docspell;
</span><span style="color:#b8bb26;">      CREATE DATABASE DOCSPELL OWNER &#39;docspell&#39;;
</span><span style="color:#b8bb26;">    &#39;&#39;</span><span>;
</span><span>  </span><span style="color:#fa5c4b;">in </span><span>{
</span><span>      </span><span style="color:#8ec07c;">enable </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">true</span><span>;
</span><span>      </span><span style="color:#8ec07c;">package </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1;">pkgs</span><span style="color:#fe8019;">.</span><span style="color:#fdf4c1;">postgresql_11</span><span>;
</span><span>      </span><span style="color:#8ec07c;">enableTCPIP </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">true</span><span>;
</span><span>      </span><span style="color:#8ec07c;">initialScript </span><span style="color:#fe8019;">= </span><span style="color:#fdf4c1;">pginit</span><span>;
</span><span>      </span><span style="color:#8ec07c;">port </span><span style="color:#fe8019;">= </span><span style="color:#d3869b;">5432</span><span>;
</span><span>      </span><span style="color:#8ec07c;">authentication </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&#39;&#39;
</span><span style="color:#b8bb26;">        host  all  all 0.0.0.0/0 md5
</span><span style="color:#b8bb26;">      &#39;&#39;</span><span>;
</span><span>  };
</span><span>
</span><span>
</span><span>  </span><span style="color:#8ec07c;">networking </span><span style="color:#fe8019;">= </span><span>{
</span><span>    </span><span style="color:#8ec07c;">hostName </span><span style="color:#fe8019;">= </span><span style="color:#b8bb26;">&quot;docspellexample&quot;</span><span>;
</span><span>    </span><span style="color:#8ec07c;">firewall</span><span>.</span><span style="color:#8ec07c;">allowedTCPPorts </span><span style="color:#fe8019;">= </span><span>[</span><span style="color:#d3869b;">7880</span><span>];
</span><span>  };
</span><span>}
</span></code></pre>

                        </div>
                    </div>
                </div>
            </div>
        </section>

        <footer class="footer">
    <div class="container">
        <div class="content has-text-centered">
            <span>
                Docspell 0.31.0
            </span>
            <span class="ml-1 mr-1">â€¢</span>
            <a href="https://spdx.org/licenses/AGPL-3.0-or-later.html" target="_blank">AGPLv3+</a>
            <span class="ml-1 mr-1">â€¢</span>
            <a href="https://github.com/eikek/docspell" target="_blank">
                Source Code
            </a>
            <span class="ml-1 mr-1">â€¢</span>
            <span>
                Chat on <a href="https://gitter.im/eikek/docspell">Gitter</a>/<a href="https://app.element.io/#/room/#eikek_docspell:gitter.im">Matrix</a>
            </span>
        </div>
    </div>
    
</footer>

        <script type="text/javascript" src="https://docspell.org/elasticlunr.min.js"></script>
<script type="text/javascript" src="https://docspell.org/search_index.en.js"></script>
<script type="text/javascript" src="https://docspell.org/js/searchhelper.js"></script>
<script type="text/javascript" src="https://docspell.org/js/bundle.js"></script>

        <script>
 var initSearch = function() {
     var elmSearch = Elm.Search.init({
         node: document.getElementById("search"),
         flags: {}
     });
     initElmSearch(elmSearch);
 }
 if (document.readyState === "complete" ||
     (document.readyState !== "loading" && !document.documentElement.doScroll)
 ) {
     initSearch();
 } else {
     document.addEventListener("DOMContentLoaded", initSearch);
 }
</script>

        <!-- Fathom - simple website analytics - https://github.com/usefathom/fathom -->
<script>
 (function(f, a, t, h, o, m){
     a[h]=a[h]||function(){
         (a[h].q=a[h].q||[]).push(arguments)
     };
     o=f.createElement('script'),
     m=f.getElementsByTagName('script')[0];
     o.async=1; o.src=t; o.id='fathom-script';
     m.parentNode.insertBefore(o,m)
 })(document, window, '//webstats.daheim.site/tracker.js', 'fathom');
 fathom('set', 'siteId', 'OGJDF');
 fathom('trackPageview');
</script>
<!-- / Fathom -->

    </body>
</html>

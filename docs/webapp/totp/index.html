<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="Eike Kettner">
<meta name="description" content="Docspell is a Document Management System (DMS), a system that asists in organizing your piles of documents, resulting from scanners, e-mails and other sources with miminal effort.">
<meta name="keywords" content="document management system dms organizer ocr open source free scan pdf word doc archive gpl machine learning nlp auto tagging"/>
<meta name="robots" content="index,follow"/>
<meta name="image" property="og:image" content="/img/poster.png">
<meta name="title" property="og:title" content="Docspell – Simple Document Organizer">
<meta name="og:image" content="/img/poster.png">
<meta name="og:title" content="Docspell – Simple Document Organizer">
<meta name="og:site_name" content="Two-Factor Authentication - Docspell">
<meta name="og:url" content="">
<meta name="og:type" content="website">
<meta name="og:description" content="Simple Document Organizer">
<meta name="twitter:title" content="Docspell">
<meta name="twitter:image" content="/img/poster.png">
<meta name="twitter:description" content="Simple Document Organizer">
<meta name="twitter:card" content="summary_large_image">

<link rel="shortcut icon" href="/favicon-mc.ico" type="image/x-icon">
<link rel="icon" href="/favicon-mc.ico" type="image/x-icon">

        <title>Two-Factor Authentication – Docspell Documentation</title>
        <link rel="stylesheet" href="/styles.css">
    </head>
    <body>
        <section class="hero is-info is-small">
            <div class="hero-head">
                <nav class="navbar">
    <div class="navbar-brand">
        <a class="navbar-item" href="/">
            <span class="icon">
                <img src="/icons/logo-only-36.svg">
            </span>
            <span>
                Docspell
            </span>
        </a>
    </div>
    <div class="navbar-start">
        <a target="_blank"
           href="https://github.com/eikek/docspell"
           class="navbar-item">
            <span class="icon">
                <img src="/icons/github-40.svg">
            </span>
            <span>
                Github
            </span>
        </a>
    </div>
</nav>

            </div>
            <div class="hero-body">
                <div class="columns is-vcentered">
                    <div class="column is-8">
                        <h1 class="title">
                            Two-Factor Authentication
                        </h1>
                        <h2 class="subtitle">
                            Docspell Documentation
                        </h2>
                    </div>
                    <div class="column">
                        <id id="search"></id>
                    </div>
                </div>
            </div>
        </section>
        <nav class="breadcrumb has-succeeds-separator" aria-label="breadcrumbs"
             style="position:sticky; top: 0; z-index:10;">
            <ul>
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;"></a>
                </li>
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;">Overview</a>
                </li>
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;">Web-UI</a>
                </li>
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;totp&#x2F;">Two-Factor Authentication</a>
                </li>
            </ul>
        </nav>

        <section class="section pt-2">
            <div class="columns is-desktop">
                <div class="column is-3">
                    <div class="menu"
                         style="position:sticky; top:2rem; z-index:10;">
                        <ul class="menu-list">
                            
                            

                            <p class="menu-label">
                                Web-UI
                            </p>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/uploading/"
                                   >
                                    Uploads
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/metadata/"
                                   >
                                    Meta Data
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/customfields/"
                                   >
                                    Custom Fields
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/curate/"
                                   >
                                    Curate Items
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/multiedit/"
                                   >
                                    Multi Edit
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/finding/"
                                   >
                                    Finding Items
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/itemcard-customize/"
                                   >
                                    Customize Item Card
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/emailsettings/"
                                   >
                                    E-Mail Settings
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/mailitem/"
                                   >
                                    Send Items Via E-Mail
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/notifydueitems/"
                                   >
                                    Notify About Due Items
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/scanmailbox/"
                                   >
                                    Scan Mailboxes
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/processing/"
                                   >
                                    Processing Queue
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/autotagging/"
                                   >
                                    Auto Tagging
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/merge/"
                                   >
                                    Merge Items
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/totp/"
                                   class="is-active">
                                    Two-Factor Authentication
                                </a>
                                
                                <ul class="menu-list">
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;totp&#x2F;#setup">
                                            Setup
                                        </a>
                                        <ul>
                                            
                                        </ul>
                                    </li>
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;totp&#x2F;#remove-2fa">
                                            Remove 2FA
                                        </a>
                                        <ul>
                                            
                                        </ul>
                                    </li>
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;totp&#x2F;#when-secret-is-lost">
                                            When secret is lost
                                        </a>
                                        <ul>
                                            
                                        </ul>
                                    </li>
                                    
                                </ul>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/share/"
                                   >
                                    Shares
                                </a>
                                
                            </li>
                            
                        </ul>
                    </div>
                </div>

                <div class="column is-9">
                    <div class="container">
                        <div class="content doc">
                            <p>Docspell has built-in support for two-factor (2FA) authentication
using
<a href="https://en.wikipedia.org/wiki/Time-based_One-Time_Password">TOTP</a>s.
For anything more, consider a dedicated account management tool and
<a href="https://docspell.org/docs/configure/#openid-connect-oauth2">OpenID Connect</a>.</p>
<h1 id="setup">Setup<a class="zola-anchor" href="#setup" aria-label="Anchor link for: setup">🔗</a></h1>
<p>A user can enable a TOTP as a second factor in their user settings. It
is required to have some external device to hold the shared secret. A
popular way is using your phone. Some Android apps are for example
<a href="https://f-droid.org/en/packages/com.beemdevelopment.aegis/">Aegis</a> or
<a href="https://f-droid.org/en/packages/org.shadowice.flocke.andotp/">andOTP</a>;
and there are others as well.</p>
<p>In user settings, go to <em>Two Factor Authentication</em> and click on
<em>Activate two-factor authentication</em>. This then shows you a QR code:</p>
<figure class="image">
    
    
    
    

    <img src="https://docspell.org/docs/webapp/totp-01.png">
</figure>
<p>Open the app (or whatever you use) and scan the QR code. A new account
is created and a 6-digit code will be shown to you. Enter this code in
the box below to confirm.</p>
<p>If you cannot scan the QR code, click on the &quot;eye icon&quot; to reveal the
secret that you then need to type/copy. This secret will never be
shown again. Should you loose it (or your device where it is saved),
you cannot log in anymore. See below for how to get into your account
in this case.</p>
<p>Once you typed in the code, the 2FA is enabled.</p>
<figure class="image">
    
    
    
    

    <img src="https://docspell.org/docs/webapp/totp-02.png">
</figure>
<p>When you now login, a second login form will be shown where you must
now enter a one time password from the device.</p>
<h1 id="remove-2fa">Remove 2FA<a class="zola-anchor" href="#remove-2fa" aria-label="Anchor link for: remove-2fa">🔗</a></h1>
<p>If you go to this page with 2FA enabled (refresh the page after
finishing the setup), you can disable it. The secret will be removed
from the database.</p>
<p>It shows a form that allows you to disable 2FA again, but requires you
to enter a one time password.</p>
<figure class="image">
    
    
    
    

    <img src="https://docspell.org/docs/webapp/totp-03.png">
</figure>
<p>If you have successfully disabled 2FA, you'll see the first screen
where you can activate 2FA. You can remove the account from your
device. Should you want to go back to 2FA, you need to go through the
setup again and create a new secret.</p>
<h1 id="when-secret-is-lost">When secret is lost<a class="zola-anchor" href="#when-secret-is-lost" aria-label="Anchor link for: when-secret-is-lost">🔗</a></h1>
<p>Should you loose your device where the secret is stored, you cannot
log into docspell anymore. In this case you can use the <a href="https://docspell.org/docs/tools/cli/">command line
client</a> to execute an admin command that removes
2FA for a given user.</p>
<p>For this to work, you need to <a href="https://docspell.org/docs/configure/#admin-endpoint">enable the admin
endpoint</a>. Then execute the
<code>disable-2fa</code> admin command and specify the complete account.</p>
<pre style="background-color:#282828;color:#fdf4c1aa;"><code><span>$ dsc admin -a test123 disable-2fa --account demo
</span><span>┌─────────┬──────────────────────┐
</span><span>│ success │ message              │
</span><span>├─────────┼──────────────────────┤
</span><span>│ true    │ TOTP setup disabled. │
</span><span>└─────────┴──────────────────────┘
</span></code></pre>

                        </div>
                    </div>
                </div>
            </div>
        </section>

        <footer class="footer">
    <div class="container">
        <div class="content has-text-centered">
            <span>
                Docspell 0.29.0
            </span>
            <span class="ml-1 mr-1">•</span>
            <a href="https://spdx.org/licenses/AGPL-3.0-or-later.html" target="_blank">AGPLv3+</a>
            <span class="ml-1 mr-1">•</span>
            <a href="https://github.com/eikek/docspell" target="_blank">
                Source Code
            </a>
            <span class="ml-1 mr-1">•</span>
            <span>
                Chat on <a href="https://gitter.im/eikek/docspell">Gitter</a>/<a href="https://app.element.io/#/room/#eikek_docspell:gitter.im">Matrix</a>
            </span>
        </div>
    </div>
    
</footer>

        <script type="text/javascript" src="https://docspell.org/elasticlunr.min.js"></script>
<script type="text/javascript" src="https://docspell.org/search_index.en.js"></script>
<script type="text/javascript" src="https://docspell.org/js/searchhelper.js"></script>
<script type="text/javascript" src="https://docspell.org/js/bundle.js"></script>

        <script>
 var initSearch = function() {
     var elmSearch = Elm.Search.init({
         node: document.getElementById("search"),
         flags: {}
     });
     initElmSearch(elmSearch);
 }
 if (document.readyState === "complete" ||
     (document.readyState !== "loading" && !document.documentElement.doScroll)
 ) {
     initSearch();
 } else {
     document.addEventListener("DOMContentLoaded", initSearch);
 }
</script>

        <!-- Fathom - simple website analytics - https://github.com/usefathom/fathom -->
<script>
 (function(f, a, t, h, o, m){
     a[h]=a[h]||function(){
         (a[h].q=a[h].q||[]).push(arguments)
     };
     o=f.createElement('script'),
     m=f.getElementsByTagName('script')[0];
     o.async=1; o.src=t; o.id='fathom-script';
     m.parentNode.insertBefore(o,m)
 })(document, window, '//webstats.daheim.site/tracker.js', 'fathom');
 fathom('set', 'siteId', 'OGJDF');
 fathom('trackPageview');
</script>
<!-- / Fathom -->

    </body>
</html>

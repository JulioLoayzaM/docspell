<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="Eike Kettner">
<meta name="description" content="Docspell is a Document Management System (DMS), a system that asists in organizing your piles of documents, resulting from scanners, e-mails and other sources with miminal effort.">
<meta name="keywords" content="document management system dms organizer ocr open source free scan pdf word doc archive gpl machine learning nlp auto tagging"/>
<meta name="robots" content="index,follow"/>
<meta name="image" property="og:image" content="/img/poster.png">
<meta name="title" property="og:title" content="Docspell – Simple Document Organizer">
<meta name="og:image" content="/img/poster.png">
<meta name="og:title" content="Docspell – Simple Document Organizer">
<meta name="og:site_name" content="Notifications - Docspell">
<meta name="og:url" content="">
<meta name="og:type" content="website">
<meta name="og:description" content="Simple Document Organizer">
<meta name="twitter:title" content="Docspell">
<meta name="twitter:image" content="/img/poster.png">
<meta name="twitter:description" content="Simple Document Organizer">
<meta name="twitter:card" content="summary_large_image">

<link rel="shortcut icon" href="/favicon-mc.ico" type="image/x-icon">
<link rel="icon" href="/favicon-mc.ico" type="image/x-icon">

        <title>Notifications – Docspell Documentation</title>
        <link rel="stylesheet" href="/styles.css">
    </head>
    <body>
        <section class="hero is-info is-small">
            <div class="hero-head">
                <nav class="navbar">
    <div class="navbar-brand">
        <a class="navbar-item" href="/">
            <span class="icon">
                <img src="/icons/logo-only-36.svg">
            </span>
            <span>
                Docspell
            </span>
        </a>
    </div>
    <div class="navbar-start">
        <a target="_blank"
           href="https://github.com/eikek/docspell"
           class="navbar-item">
            <span class="icon">
                <img src="/icons/github-40.svg">
            </span>
            <span>
                Github
            </span>
        </a>
    </div>
</nav>

            </div>
            <div class="hero-body">
                <div class="columns is-vcentered">
                    <div class="column is-8">
                        <h1 class="title">
                            Notifications
                        </h1>
                        <h2 class="subtitle">
                            Docspell Documentation
                        </h2>
                    </div>
                    <div class="column">
                        <id id="search"></id>
                    </div>
                </div>
            </div>
        </section>
        <nav class="breadcrumb has-succeeds-separator" aria-label="breadcrumbs"
             style="position:sticky; top: 0; z-index:10;">
            <ul>
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;"></a>
                </li>
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;">Overview</a>
                </li>
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;">Web-UI</a>
                </li>
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;notification&#x2F;">Notifications</a>
                </li>
            </ul>
        </nav>

        <section class="section pt-2">
            <div class="columns is-desktop">
                <div class="column is-3">
                    <div class="menu"
                         style="position:sticky; top:2rem; z-index:10;">
                        <ul class="menu-list">
                            
                            

                            <p class="menu-label">
                                Web-UI
                            </p>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/uploading/"
                                   >
                                    Uploads
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/metadata/"
                                   >
                                    Meta Data
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/customfields/"
                                   >
                                    Custom Fields
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/curate/"
                                   >
                                    Curate Items
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/multiedit/"
                                   >
                                    Multi Edit
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/finding/"
                                   >
                                    Finding Items
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/itemcard-customize/"
                                   >
                                    Customize Item Card
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/emailsettings/"
                                   >
                                    E-Mail Settings
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/mailitem/"
                                   >
                                    Send Items Via E-Mail
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/notification/"
                                   class="is-active">
                                    Notifications
                                </a>
                                
                                <ul class="menu-list">
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;notification&#x2F;#channels">
                                            Channels
                                        </a>
                                        <ul>
                                            
                                            <li>
                                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;notification&#x2F;#matrix">
                                                    Matrix
                                                </a>
                                            </li>
                                            
                                            <li>
                                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;notification&#x2F;#gotify">
                                                    Gotify
                                                </a>
                                            </li>
                                            
                                            <li>
                                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;notification&#x2F;#e-mail">
                                                    E-Mail
                                                </a>
                                            </li>
                                            
                                            <li>
                                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;notification&#x2F;#http-request">
                                                    HTTP Request
                                                </a>
                                            </li>
                                            
                                        </ul>
                                    </li>
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;notification&#x2F;#webhooks">
                                            Webhooks
                                        </a>
                                        <ul>
                                            
                                            <li>
                                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;notification&#x2F;#events">
                                                    Events
                                                </a>
                                            </li>
                                            
                                            <li>
                                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;notification&#x2F;#testing">
                                                    Testing
                                                </a>
                                            </li>
                                            
                                            <li>
                                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;notification&#x2F;#json-filter-expression">
                                                    JSON filter expression
                                                </a>
                                            </li>
                                            
                                        </ul>
                                    </li>
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;notification&#x2F;#periodic-queries">
                                            Periodic Queries
                                        </a>
                                        <ul>
                                            
                                            <li>
                                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;notification&#x2F;#due-items-task">
                                                    Due Items Task
                                                </a>
                                            </li>
                                            
                                            <li>
                                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;notification&#x2F;#generic-query-task">
                                                    Generic Query Task
                                                </a>
                                            </li>
                                            
                                            <li>
                                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;notification&#x2F;#schedule">
                                                    Schedule
                                                </a>
                                            </li>
                                            
                                        </ul>
                                    </li>
                                    
                                </ul>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/scanmailbox/"
                                   >
                                    Scan Mailboxes
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/processing/"
                                   >
                                    Processing Queue
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/autotagging/"
                                   >
                                    Auto Tagging
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/merge/"
                                   >
                                    Merge Items
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/totp/"
                                   >
                                    Two-Factor Authentication
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/share/"
                                   >
                                    Shares
                                </a>
                                
                            </li>
                            
                        </ul>
                    </div>
                </div>

                <div class="column is-9">
                    <div class="container">
                        <div class="content doc">
                            <p>Docspell can notify on specific events and it can run queries
periodically and notify about the result.</p>
<p>Notification can be configured per user: go to <em>User profile →
Notifications</em>. You can choose between webhooks and two periodic
queries. Webhooks are HTTP requests that are immediatly executed when
some event happens in Docspell, for example a tag was added to an
item. Periodic queries can be used for running queries regularly and
get the result sent as message.</p>
<p>Both require to first select a channel, for how the message should be
sent.</p>
<img src="https://docspell.org/docs/webapp/notification-01.png" width="250px">
<h1 id="channels">Channels<a class="zola-anchor" href="#channels" aria-label="Anchor link for: channels">🔗</a></h1>
<p>Channels are means to deliver a message. Currently, docspell supports
these channels:</p>
<ul>
<li>E-Mail; you need to define SMTP settings
<a href="https://docspell.org/docs/webapp/emailsettings/#smtp-settings">here</a></li>
<li>HTTP Requests: another option is to execute a generic HTTP request
with all event data in a JSON body.</li>
<li><a href="https://matrix.org">Matrix</a></li>
<li><a href="https://gotify.net">Gotify</a></li>
</ul>
<h2 id="matrix">Matrix<a class="zola-anchor" href="#matrix" aria-label="Anchor link for: matrix">🔗</a></h2>
<p>Matrix is an open network for secure and decentralized communication.
It relies on open standards and can be self-hosted.</p>
<p>To receive messages into your matrix room, you need to give the room
id, your access key and the url of your home server, for example
<code>https://matrix.org</code>.</p>
<p>You can find the room id in your room settings under &quot;Advanced&quot; in
Element. The access key is in your user settings under tab &quot;Help &amp;
About&quot; in Element.</p>
<figure class="image">
    
    
    
    

    <img src="https://docspell.org/docs/webapp/notification-02.png">
</figure>
<h2 id="gotify">Gotify<a class="zola-anchor" href="#gotify" aria-label="Anchor link for: gotify">🔗</a></h2>
<p>Gotify is a simple application for receiving messages to be notified
on several clients via websockets. It is great for connecting
applications to your devices.</p>
<p>It requires only your gotify url and the application secret.</p>
<figure class="image">
    
    
    
    

    <img src="https://docspell.org/docs/webapp/notification-03.png">
</figure>
<h2 id="e-mail">E-Mail<a class="zola-anchor" href="#e-mail" aria-label="Anchor link for: e-mail">🔗</a></h2>
<p>E-Mails are sent using one of your configured <a href="https://docspell.org/docs/webapp/emailsettings/#smtp-settings">SMTP
connections</a>.</p>
<p>The part <code>docspell.joex.send-mail.list-id</code> in joex' configuration file
can be used to add a <code>List-Id</code> mail header to every notification mail.</p>
<h2 id="http-request">HTTP Request<a class="zola-anchor" href="#http-request" aria-label="Anchor link for: http-request">🔗</a></h2>
<p>The most generic form is the channel <em>HTTP Request</em>. This just sends a
POST request to a configured endpoint. The requests contains a JSON
body with the event details.</p>
<h1 id="webhooks">Webhooks<a class="zola-anchor" href="#webhooks" aria-label="Anchor link for: webhooks">🔗</a></h1>
<p>Webhooks are http requests that are generated on specific events in
Docspell.</p>
<h2 id="events">Events<a class="zola-anchor" href="#events" aria-label="Anchor link for: events">🔗</a></h2>
<p>You need to choose which events you are interested in.</p>
<figure class="image">
    
    
    
    

    <img src="https://docspell.org/docs/webapp/notification-04.png">
</figure>
<p>You can do so by selecting multiple event types or by clicking the
<em>Notify on all events</em> checkbox.</p>
<p>Each event type generates different event data. This data is prepared
as a JSON structure which is either send directly or used to generate
a message from it.</p>
<p>Additionally, it is possible to filter the events using an expression
that is applied to the event data JSON structure.</p>
<h2 id="testing">Testing<a class="zola-anchor" href="#testing" aria-label="Anchor link for: testing">🔗</a></h2>
<p>The webhook form allows you to look at some sample events. These
events are generated from random data and show how the message would
look like (roughly, because it obviously depends on how the channel
displays it).</p>
<p>You can also click the <em>Test Delivery</em> button. This generates a sample
event of the first of the selected event (or some chosen one, if
<em>Notify on all events</em> is active) and sends it via the current
channel.</p>
<h2 id="json-filter-expression">JSON filter expression<a class="zola-anchor" href="#json-filter-expression" aria-label="Anchor link for: json-filter-expression">🔗</a></h2>
<p>This filter allows to further constrain the events that trigger a
notification. For example, it can be used to be notified only when
tags of a specific category are changed.</p>
<p>It works by selecting paths into the JSON structure of the event. Thus
you need to know this structure, in order to define this expression. A
good way is to look at the sample events for the <em>HTTP Request</em>
channel. These show the exact JSON structure that this filter is
applied to (that applies to every channel).</p>
<figure class="image">
    
    
    
    

    <img src="https://docspell.org/docs/webapp/notification-05.png">
</figure>
<p>As an example: Choose the event <em>TagsChanged</em> and this filter
expression: <code>content.added,removed.category=document_type</code> to be
notified whenever a tag is added or removed whose category is
<code>document_type</code>.</p>
<p>Please see <a href="https://docspell.org/docs/jsonminiquery/">this page</a> for details
about it.</p>
<div class="notification is-info is-light" style="z-index: 0">
    <div class="content ">
        <p class="title is-5">
            ⚠ Please note
        </p>
        <div>
            <p>The webhook feature is still experimental. It starts out with only a
few events to choose from and the JSON structure of events might
change in next versions.</p>

        </div>
    </div>
</div>
<h1 id="periodic-queries">Periodic Queries<a class="zola-anchor" href="#periodic-queries" aria-label="Anchor link for: periodic-queries">🔗</a></h1>
<p>These are <a href="https://docspell.org/docs/joex/">background tasks</a> that execute a
defined query. If the query yields a non-empty result, the result is
converted into a message and sent to the specified target system.</p>
<p>For example, this can be used to regularly inform about due items, all
items tagged <em>Todo</em> etc.</p>
<h2 id="due-items-task">Due Items Task<a class="zola-anchor" href="#due-items-task" aria-label="Anchor link for: due-items-task">🔗</a></h2>
<p>The settings allow to customize the query for searching items. You can
choose to only include items that have one or more tags (these are
<code>and</code>-ed, so all tags must exist on the item). You can also provide
tags that must <em>not</em> appear on an item (these tags are <code>or</code>-ed, so
only one such tag is enough ot exclude an item). A common use-case
would be to manually tag an item with <em>Done</em> once there is nothing
more to do. Then these items can be excluded from the search. The
somewhat inverse use-case is to always tag items with a <em>Todo</em> tag and
remove it once completed.</p>
<p>The <em>Remind Days</em> field species the number of days the due date may be
in the future. Each time the task executes, it searches for items with
a due date lower than <code>today + remindDays</code>.</p>
<p>If you don't restrict the search using tags, then all items with a due
date lower than this value are selected. Since items are (usually) not
deleted, this only makes sense, if you remove the due date once you
are done with an item.</p>
<p>The last option is to check <em>cap overdue items</em>, which uses the value
in <em>Remind Days</em> to further restrict the due date of an item: only
those with a due date <em>greater than</em> <code>today - remindDays</code> are
selected. In other words, only items with an overdue time of <em>at most</em>
<em>Remind Days</em> are included.</p>
<h2 id="generic-query-task">Generic Query Task<a class="zola-anchor" href="#generic-query-task" aria-label="Anchor link for: generic-query-task">🔗</a></h2>
<p>This is the generic version of the <em>Due Items Task</em>. Instead of
selecting teh items via form elements, you can define a custom
<a href="https://docspell.org/docs/query/">query</a>.</p>
<h2 id="schedule">Schedule<a class="zola-anchor" href="#schedule" aria-label="Anchor link for: schedule">🔗</a></h2>
<p>Both tasks have a <em>Schedule</em> field to specify the periodicity of the
task. The syntax is similiar to a date-time string, like <code>2019-09-15 12:32</code>, where each part is a pattern to also match multple values. The
ui tries to help a little by displaying the next two date-times this
task would execute. A more in depth help is available
<a href="https://github.com/eikek/calev#what-are-calendar-events">here</a>. For
example, to execute the task every monday at noon, you would write:
<code>Mon *-*-* 12:00</code>. A date-time part can match all values (<code>*</code>), a list
of values (e.g. <code>1,5,12,19</code>) or a range (e.g. <code>1..9</code>). Long lists may
be written in a shorter way using a repetition value. It is written
like this: <code>1/7</code> which is the same as a list with <code>1</code> and all
multiples of <code>7</code> added to it. In other words, it matches <code>1</code>, <code>1+7</code>,
<code>1+7+7</code>, <code>1+7+7+7</code> and so on.</p>
<p>You can click on <em>Start Once</em> to run this task right now, without
saving the form to the database (&quot;right now&quot; means it is picked up by
a free job executor).</p>
<p>If you click <em>Submit</em> these settings are saved and the task runs
periodically.</p>
<p>You can see the task executing at the <a href="https://docspell.org/docs/webapp/processing/">processing
page</a>.</p>

                        </div>
                    </div>
                </div>
            </div>
        </section>

        <footer class="footer">
    <div class="container">
        <div class="content has-text-centered">
            <span>
                Docspell 0.30.0
            </span>
            <span class="ml-1 mr-1">•</span>
            <a href="https://spdx.org/licenses/AGPL-3.0-or-later.html" target="_blank">AGPLv3+</a>
            <span class="ml-1 mr-1">•</span>
            <a href="https://github.com/eikek/docspell" target="_blank">
                Source Code
            </a>
            <span class="ml-1 mr-1">•</span>
            <span>
                Chat on <a href="https://gitter.im/eikek/docspell">Gitter</a>/<a href="https://app.element.io/#/room/#eikek_docspell:gitter.im">Matrix</a>
            </span>
        </div>
    </div>
    
</footer>

        <script type="text/javascript" src="https://docspell.org/elasticlunr.min.js"></script>
<script type="text/javascript" src="https://docspell.org/search_index.en.js"></script>
<script type="text/javascript" src="https://docspell.org/js/searchhelper.js"></script>
<script type="text/javascript" src="https://docspell.org/js/bundle.js"></script>

        <script>
 var initSearch = function() {
     var elmSearch = Elm.Search.init({
         node: document.getElementById("search"),
         flags: {}
     });
     initElmSearch(elmSearch);
 }
 if (document.readyState === "complete" ||
     (document.readyState !== "loading" && !document.documentElement.doScroll)
 ) {
     initSearch();
 } else {
     document.addEventListener("DOMContentLoaded", initSearch);
 }
</script>

        <!-- Fathom - simple website analytics - https://github.com/usefathom/fathom -->
<script>
 (function(f, a, t, h, o, m){
     a[h]=a[h]||function(){
         (a[h].q=a[h].q||[]).push(arguments)
     };
     o=f.createElement('script'),
     m=f.getElementsByTagName('script')[0];
     o.async=1; o.src=t; o.id='fathom-script';
     m.parentNode.insertBefore(o,m)
 })(document, window, '//webstats.daheim.site/tracker.js', 'fathom');
 fathom('set', 'siteId', 'OGJDF');
 fathom('trackPageview');
</script>
<!-- / Fathom -->

    </body>
</html>
